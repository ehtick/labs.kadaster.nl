(this["webpackJsonpviewer-builder-client"]=this["webpackJsonpviewer-builder-client"]||[]).push([[43],{1592:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(5),s=a(29),i=a(11),u=a(12),l=(a(70),a(35)),o=function(){function e(t){Object(n.a)(this,e),this._result=t,this.endResult={}}return Object(r.a)(e,[{key:"isOK",value:function(){return null!=this._result&&(null!=this._result.results&&null!=this._result.results.bindings)}},{key:"getSimplifiedArray",value:function(){var e=[];return this._result.results.bindings.map((function(t){var a={};for(var n in t)a[n]=t[n].value;e.push(a)})),e}},{key:"toDate",value:function(e){for(var t in this.endResult){var a=this.endResult[t][e];if(null!=a){var n=new Date(a);this.endResult[t][e]=n.toISOString().split("T")[0]}}}},{key:"dateToLong",value:function(e){for(var t in this.endResult){var a=this.endResult[t][e];if(null!=a){var n=new Date(a);this.endResult[t][e]=n.getTime()}}}},{key:"addSimpleIntegerID",value:function(e){var t=0;for(var a in this.endResult){t++,this.endResult[a][e]=t}}},{key:"getSimplifiedArrayUsingObjectID",value:function(e){var t=this,a=[],n={};return this._result.results.bindings.map((function(r){try{var s=r[e].value,i=n[s];for(var u in null==i&&(i={},n[s]=i,a.push(i)),r)i[u]=r[u].value}catch(l){console.log("geen id gevonden",e,t._result)}})),this.endResult=a,a}}]),e}(),p=a(97),c=a(195),h=a(25),d=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).getUrl=function(){return"/".concat(window.bbFolderName,"/static/iframes/ganttchart2/gantt.html")},e.submitFormSuccesful=function(){if(h.a.setTimeStampParameter(Object(s.a)(e),!0),e.props.successMessage&&Object(c.b)(e.props.successMessage),e.props.closePopup)try{e.props.closeDialog()}catch(t){}},e.submitFormFailure=function(){null!=e.props.failureMessage&&window.alert(e.props.failureMessage)},e.scrolling="no",e.noEvents=!1,e.usesParameters=!1,e}return Object(r.a)(a,[{key:"getTasksFromData",value:function(){this.tasks={tasks:[],selectedRow:2,deletedTaskIds:[],resources:[{id:"tmp_1",name:"Resource 1"},{id:"tmp_2",name:"Resource 2"},{id:"tmp_3",name:"Resource 3"},{id:"tmp_4",name:"Resource 4"}],roles:[{id:"tmp_1",name:"Project Manager"},{id:"tmp_2",name:"Worker"},{id:"tmp_3",name:"Stakeholder"},{id:"tmp_4",name:"Customer"}],canWrite:!0,canDelete:!0,canWriteOnParent:!0,canAdd:!0};var e=this.props.data,t=new o(e);return t.isOK()&&(t.getSimplifiedArrayUsingObjectID("id"),t.dateToLong("start"),t.dateToLong("end"),t.addSimpleIntegerID("id"),this.tasks.tasks=t.endResult),this.tasks}},{key:"generateUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{key:"convertSaveData",value:function(e){var t=this,a=[];return null!=e.tasks&&e.tasks.map((function(n){if(null==n.uri&&(n.uri="http://wistor.nl/planning#"+t.generateUUID()),null==n.graph){var r=null;e.tasks.map((function(e){null!=e.graph&&(r=e.graph)})),n.graph=r}var s={uri:n.uri,propuri:"http://wistor.nl/planning#endDate",graph:n.graph,valuetype:"http://www.w3.org/2001/XMLSchema#dateTime"};a.push(s);var i={uri:n.uri,propuri:"http://wistor.nl/planning#beginDate",graph:n.graph,valuetype:"http://www.w3.org/2001/XMLSchema#dateTime"};a.push(i);var u={uri:n.uri,propuri:"http://www.w3.org/2000/01/rdf-schema#label",graph:n.graph,value:'"no name"',valuetype:"http://www.w3.org/2001/XMLSchema#string"};a.push(u);var l={uri:n.uri,propuri:"http://wistor.nl/planning#code",graph:n.graph,value:'""',valuetype:"http://www.w3.org/2001/XMLSchema#string"};a.push(l),null!=n.start&&(i.value=new Date(n.start).toISOString()),null!=n.end&&(s.value=new Date(n.end).toISOString()),null!=n.name&&(u.value=n.name),null!=n.code&&(l.value=n.code)})),a}},{key:"saveData",value:function(e){var t={results:this.convertSaveData(e)};console.log("Saving on server",e,t),p.a.sendCommand(this,"formCommand",t,this.submitFormSuccesful,this.submitFormFailure)}}]),a}(l.a);t.default=d}}]);
//# sourceMappingURL=43.5e26e80a.chunk.js.map