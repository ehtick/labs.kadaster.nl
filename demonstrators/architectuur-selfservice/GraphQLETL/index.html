
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>GraphQL - Self-Service GIS platform Architectuur</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="amber">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ontsluiting-middels-graphql" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Self-Service GIS platform Architectuur" class="md-header__button md-logo" aria-label="Self-Service GIS platform Architectuur" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17c-.13 0-.26 0-.39.04l-1.61-3.25a2.5 2.5 0 0 0-1.75-4.29c-.13 0-.25 0-.39.04l-1.63-3.25c.48-.45.77-1.08.77-1.79a2.5 2.5 0 0 0-5 0c0 .71.29 1.34.76 1.79L8.64 9.54c-.14-.04-.26-.04-.39-.04a2.5 2.5 0 0 0-1.75 4.29l-1.61 3.25C4.76 17 4.63 17 4.5 17a2.5 2.5 0 0 0 0 5A2.5 2.5 0 0 0 7 19.5c0-.7-.29-1.34-.76-1.79l1.62-3.25c.14.04.26.04.39.04s.25 0 .39-.04l1.63 3.25c-.47.45-.77 1.09-.77 1.79a2.5 2.5 0 0 0 5 0A2.5 2.5 0 0 0 12 17c-.13 0-.26 0-.39.04L10 13.79c.46-.45.75-1.08.75-1.79s-.29-1.34-.75-1.79l1.61-3.25c.13.04.26.04.39.04s.26 0 .39-.04L14 10.21c-.45.45-.75 1.09-.75 1.79a2.5 2.5 0 0 0 2.5 2.5c.13 0 .25 0 .39-.04l1.63 3.25c-.47.45-.77 1.09-.77 1.79a2.5 2.5 0 0 0 5 0 2.5 2.5 0 0 0-2.5-2.5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Self-Service GIS platform Architectuur
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GraphQL
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Introductie
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Architecture/" class="md-tabs__link md-tabs__link--active">
        Data
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Modelling/" class="md-tabs__link">
        Modelling
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Gebruik/" class="md-tabs__link">
        Gebruik
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../UseCases/" class="md-tabs__link">
        Use cases
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Self-Service GIS platform Architectuur" class="md-nav__button md-logo" aria-label="Self-Service GIS platform Architectuur" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17c-.13 0-.26 0-.39.04l-1.61-3.25a2.5 2.5 0 0 0-1.75-4.29c-.13 0-.25 0-.39.04l-1.63-3.25c.48-.45.77-1.08.77-1.79a2.5 2.5 0 0 0-5 0c0 .71.29 1.34.76 1.79L8.64 9.54c-.14-.04-.26-.04-.39-.04a2.5 2.5 0 0 0-1.75 4.29l-1.61 3.25C4.76 17 4.63 17 4.5 17a2.5 2.5 0 0 0 0 5A2.5 2.5 0 0 0 7 19.5c0-.7-.29-1.34-.76-1.79l1.62-3.25c.14.04.26.04.39.04s.25 0 .39-.04l1.63 3.25c-.47.45-.77 1.09-.77 1.79a2.5 2.5 0 0 0 5 0A2.5 2.5 0 0 0 12 17c-.13 0-.26 0-.39.04L10 13.79c.46-.45.75-1.08.75-1.79s-.29-1.34-.75-1.79l1.61-3.25c.13.04.26.04.39.04s.26 0 .39-.04L14 10.21c-.45.45-.75 1.09-.75 1.79a2.5 2.5 0 0 0 2.5 2.5c.13 0 .25 0 .39-.04l1.63 3.25c-.47.45-.77 1.09-.77 1.79a2.5 2.5 0 0 0 5 0 2.5 2.5 0 0 0-2.5-2.5z"/></svg>

    </a>
    Self-Service GIS platform Architectuur
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Introductie
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Introductie" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Introductie
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introductie
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Status/" class="md-nav__link">
        Status
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Visie/" class="md-nav__link">
        Visie
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Data
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Architecture/" class="md-nav__link">
        Overzicht
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Brondata/" class="md-nav__link">
        Brondata
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          GraphQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        GraphQL
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#voordelen-en-doel-van-graphql" class="md-nav__link">
    Voordelen en doel van GraphQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphql-op-een-silo" class="md-nav__link">
    GraphQL op een silo
  </a>
  
    <nav class="md-nav" aria-label="GraphQL op een silo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typedefs" class="md-nav__link">
    Typedefs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    Query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolvers" class="md-nav__link">
    Resolvers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphql-over-de-silos-heen" class="md-nav__link">
    GraphQL over de silo's heen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphql-over-linked-data" class="md-nav__link">
    GraphQL over Linked Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusie" class="md-nav__link">
    Conclusie
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Enhancer/" class="md-nav__link">
        GraphQL naar Linked Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../LinkedData/" class="md-nav__link">
        Linked Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../KnowledgeGraph/" class="md-nav__link">
        Knowledge Graph
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../LDViews/" class="md-nav__link">
        LD Views
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Pipeline/" class="md-nav__link">
        Pipeline
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Netwerk/" class="md-nav__link">
        Netwerk
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Modelling
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Modelling" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Modelling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Modelling/" class="md-nav__link">
        Overzicht
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../IRI/" class="md-nav__link">
        IRI Strategie
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Semantics/" class="md-nav__link">
        Definities
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Gebruik
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Gebruik" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Gebruik
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Gebruik/" class="md-nav__link">
        Overzicht
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GraphQL/" class="md-nav__link">
        GraphQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SparQL/" class="md-nav__link">
        Linked Data (SPARQL)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Use cases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Use cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Use cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../UseCases/" class="md-nav__link">
        Overzicht
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#voordelen-en-doel-van-graphql" class="md-nav__link">
    Voordelen en doel van GraphQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphql-op-een-silo" class="md-nav__link">
    GraphQL op een silo
  </a>
  
    <nav class="md-nav" aria-label="GraphQL op een silo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typedefs" class="md-nav__link">
    Typedefs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    Query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolvers" class="md-nav__link">
    Resolvers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphql-over-de-silos-heen" class="md-nav__link">
    GraphQL over de silo's heen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphql-over-linked-data" class="md-nav__link">
    GraphQL over Linked Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusie" class="md-nav__link">
    Conclusie
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="ontsluiting-middels-graphql">Ontsluiting middels GraphQL</h1>
<p><a href="https://graphql.org/">GraphQL</a> is een open-source framework oorspronkelijk ontwerpen door Facebook en tegenwoordig onderhouden door de GraphQL foundation. GraphQL is - vanuit hun eigen woorden - een querytaal voor APIs. Het combineert de gedachte van graafmodellering van je data en laagdrempelige ontsluiting via een developer-friendly API interface.</p>
<p><img alt="GraphQL Logo" src="../images/graphql-logo.png" /></p>
<h2 id="voordelen-en-doel-van-graphql">Voordelen en doel van GraphQL</h2>
<p>Met GraphQL ondervangen we een aantal vaak gestelde tekortkomingen van de services die we op onze basisregistraties leveren.</p>
<ul>
<li>Levering van data is <strong>vraaggestuurd</strong> in plaats van <strong>aanbodgestuurd</strong>. We geven de gebruiker de kans om precies die data te bevragen die hij/zij nodig heeft.</li>
<li>We maken bevragen op basis van <strong>objecten</strong> mogelijk.</li>
<li>Verschillende datasets met een administratieve connectie kunnen <strong>integraal</strong> bevraagd worden.</li>
</ul>
<p>Voor ons heeft GraphQL echter <strong>twee</strong> belangrijke doelen:</p>
<ol>
<li>GraphQL is een krachtig paradigme om data integraal en laagdrempelig richting onze afnemers beschikbaar te stelen én</li>
<li>GraphQL dient als abstractielaag op de bron, om hiermee onze Extract- Transform &amp; Load (ETL) van Linked Data uit te voeren.</li>
</ol>
<p>In dit document bespreken we nadrukkelijk dit eerste. Voor het tweede punt verwijzen we de geïnteresseerde lezer door naar de sectie over <a href="../GraphQL/">GraphQL in gebruik</a>.</p>
<h2 id="graphql-op-een-silo">GraphQL op een silo</h2>
<p>Verschillende GraphQL endpoints - naar de buitenwereld toe geidentificeerd door hun typedefs en resolvers - bevinden zich op een databron, zijnde (op dit moment) Linked Data, SQL en/of REST. Een GraphQL endpoint is dus back-end agnostisch.</p>
<h3 id="typedefs">Typedefs</h3>
<p>Zoals eerder gesteld modelleren we middels GraphQL onze data als een graaf, met verschillende nodes (objecten) en edges (relaties). Deze modellering vinden we terug in de typedefs van ons GraphQL endpoint. Neem als voorbeeld het object <a href="https://imbag.github.io/praktijkhandleiding/objecttypen/pand">Pand</a> in de BAG. De corresponderende typedefs ziet er als volgt uit:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="s2">&quot;&quot;&quot;Een pand is de kleinste bij de totstandkoming functioneel en bouwkundig-constructief zelfstandige eenheid die direct en duurzaam met de aarde is verbonden en betreedbaar en afsluitbaar is&quot;&quot;&quot;</span>
<span class="nx">type</span> <span class="nx">BAG2Pand</span> <span class="kr">implements</span> <span class="nx">JSONLD</span> <span class="err">@</span><span class="nx">key</span><span class="p">(</span><span class="nx">fields</span><span class="o">:</span> <span class="s2">&quot;lokaalid peilDatum&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s2">&quot;&quot;&quot;De identificatiecodes voor objecten zijn uniek binnen de context van deze naamgevingsruimte.</span>
<span class="s2">    Correspondeerd met de [NEN3610 standaard](https://geonovum.github.io/NEN3610-Linkeddata/#nen3610id)&quot;&quot;&quot;</span>
    <span class="nx">namespace</span><span class="o">:</span> <span class="nb">String</span><span class="o">!</span>
    <span class="s2">&quot;&quot;&quot;Een aanduiding waarmee kan worden aangegeven dat een pand in de registratie is opgenomen als gevolg van een feitelijke constatering, </span>
<span class="s2">    zonder dat er op het moment van opname sprake was van een regulier brondocument voor deze opname.</span>
<span class="s2">    Zie ook [de BAG catalogus](https://imbag.github.io/catalogus/hoofdstukken/attributen--relaties#745-geconstateerd)</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="nx">geconstateerd</span><span class="o">:</span> <span class="nb">Boolean</span>
    <span class="s2">&quot;&quot;&quot;BAG registraties bevatten een voorkomen identificatie, waarmee de volgorde wordt aangegeven waarmee registraties voor hetzelfde object zijn aangemaakt.&quot;&quot;&quot;</span>
    <span class="nx">voorkomenidentificatie</span><span class="o">:</span> <span class="nx">Int</span>
    <span class="s2">&quot;&quot;&quot;Wordt gebruikt om de formele historie voor de bronhouder mee aan de duiden. Deze attribuut beschrijft wanneer het voorkomen is ontstaan bij de bronhouder. </span>
<span class="s2">    Zie ook [deze praktijkhandleiding](https://imbag.github.io/praktijkhandleiding/artikelen/hoe-bepaal-ik-welke-gegevens-in-een-levenscyclus-van-een-object-geldig-zijn)&quot;&quot;&quot;</span>
    <span class="nx">tijdstipregistratie</span><span class="o">:</span> <span class="nx">DateTime</span>
    <span class="s2">&quot;&quot;&quot;Wordt gebruikt om de formele historie voor de bronhouder mee aan de duiden. Deze attribuut beschrijft wanneer het voorkomen is afgesloten bij de bronhouder. </span>
<span class="s2">    Zie ook [deze praktijkhandleiding](https://imbag.github.io/praktijkhandleiding/artikelen/hoe-bepaal-ik-welke-gegevens-in-een-levenscyclus-van-een-object-geldig-zijn)&quot;&quot;&quot;</span>
    <span class="nx">eindregistratie</span><span class="o">:</span> <span class="nx">DateTime</span>
    <span class="s2">&quot;&quot;&quot;Wordt gebruikt om de materiële historie voor de bronhouder mee aan de duiden .De materiële historie beschrijft vanaf welke datum een voorkomen geldig is in de registratie, via het attribuut begingeldigheid.</span>
<span class="s2">    Deze datum kan in de toekomst liggen.</span>
<span class="s2">    Zie ook [deze praktijkhandleiding](https://imbag.github.io/praktijkhandleiding/artikelen/hoe-bepaal-ik-welke-gegevens-in-een-levenscyclus-van-een-object-geldig-zijn)&quot;&quot;&quot;</span>
    <span class="nx">begingeldigheid</span><span class="o">:</span> <span class="nb">Date</span>
    <span class="s2">&quot;&quot;&quot;Wordt gebruikt om de materiële historie voor de bronhouder mee aan de duiden .De materiële historie beschrijft tot welke datum een voorkomen geldig is in de registratie, via het attribuut eindgeldigheid.</span>
<span class="s2">    Deze datum kan in de toekomst liggen.</span>
<span class="s2">    Zie ook [deze praktijkhandleiding](https://imbag.github.io/praktijkhandleiding/artikelen/hoe-bepaal-ik-welke-gegevens-in-een-levenscyclus-van-een-object-geldig-zijn)&quot;&quot;&quot;</span>
    <span class="nx">eindgeldigheid</span><span class="o">:</span> <span class="nb">Date</span>
    <span class="s2">&quot;&quot;&quot;De unieke aanduiding van het brondocument op basis waarvan een opname, mutatie of een verwijdering van gegevens ten aanzien van een pand heeft plaatsgevonden binnen een gemeente.&quot;&quot;&quot;</span>
    <span class="nx">documentnummer</span><span class="o">:</span> <span class="nb">String</span>
    <span class="s2">&quot;&quot;&quot;De datum waarop het brondocument is vastgesteld op basis waarvan een opname, mutatie of een verwijdering van gegevens ten aanzien van een pand heeft plaatsgevonden.&quot;&quot;&quot;</span>
    <span class="nx">documentdatum</span><span class="o">:</span> <span class="nb">Date</span>
    <span class="s2">&quot;&quot;&quot;De minimaal tweedimensionale geometrische representatie van het bovenzicht van de omtrekken van een pand.</span>
<span class="s2">    Gemeten in het stelsel van de Rijksdriehoeksmeting. De [ESPG](https://epsg.io/28992) code van dit stelsel is 28992.&quot;&quot;&quot;</span>
    <span class="nx">geometrie</span><span class="o">:</span> <span class="nb">String</span>  <span class="err">@</span><span class="nx">jsonrdfprefix</span><span class="p">(</span><span class="nx">prefix</span><span class="o">:</span> <span class="s2">&quot;&lt;http://www.opengis.net/def/crs/EPSG/0/28992&gt; &quot;</span><span class="p">)</span>
    <span class="s2">&quot;&quot;&quot;De aanduiding van het jaar waarin een pand oorspronkelijk als bouwkundig gereed is of zal worden opgeleverd.&quot;&quot;&quot;</span>
    <span class="nx">oorspronkelijkbouwjaar</span><span class="o">:</span> <span class="nx">Int</span><span class="o">!</span>
    <span class="s2">&quot;&quot;&quot;De fase van de levenscyclus van een pand, waarin het betreffende pand zich bevindt.</span>
<span class="s2">    Domeinverzameling:</span>
<span class="s2">    - Bouw gestart</span>
<span class="s2">    - Bouwvergunning verleend</span>
<span class="s2">    - Niet gerealiseerd pand</span>
<span class="s2">    - Pand buiten gebruik</span>
<span class="s2">    - Pand gesloopt</span>
<span class="s2">    - Pand in gebruik</span>
<span class="s2">    - Pand in gebruik (niet ingemeten)</span>
<span class="s2">    - Sloopvergunning verleend</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="nx">pandstatus</span><span class="o">:</span> <span class="nb">String</span><span class="o">!</span> <span class="err">@</span><span class="nx">jsonrdftype</span>
    <span class="s2">&quot;&quot;&quot;Een verwijzing naar de Verblijfsobjecten en diens voorkomens (historie) welke deel uit maken van dit pand. Neemt alleen het actuele voorkomen wanneer peilDatum niet leeg is.&quot;&quot;&quot;</span>
    <span class="nx">bevatverblijfsobjecten</span><span class="o">:</span> <span class="p">[</span><span class="nx">BAG2Verblijfsobject</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Kortom, het object (<strong>BAG2Pand</strong>) kent attributen (bijv. <strong>oorspronkelijkBouwjaar</strong>), verscheidene vormen van metadatering (zichtbaar in de typedefs) en object-relaties (zoals <strong>bevatVerblijfsobjecten</strong>) waarmee relaties naar andere objecten worden aangegeven.</p>
<h3 id="query">Query</h3>
<p>Onderdeel van het implementeren van de typedefs is ook het definiëren van de <strong>Query</strong> varianten die voor deze silo geldt.
Een Query definiëert de ingang waarmee de data bevraagd kan worden. Denk bijvoorbeeld aan een (set van) nummeraanduiding(en):</p>
<div class="highlight"><pre><span></span><code><span class="nx">bag2nummeraanduiding</span><span class="p">(</span><span class="nx">identificatiecode</span><span class="o">:</span> <span class="nb">String</span>  <span class="err">@</span><span class="nx">lpad</span><span class="p">(</span><span class="nx">length</span><span class="o">:</span> <span class="mf">16</span><span class="p">,</span> <span class="kr">char</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span><span class="p">),</span> <span class="nx">peilDatum</span><span class="o">:</span> <span class="nb">Date</span><span class="p">,</span> <span class="nx">first</span><span class="o">:</span> <span class="nx">Int</span><span class="p">,</span> <span class="nx">offset</span><span class="o">:</span> <span class="nx">Int</span><span class="p">)</span><span class="o">:</span> <span class="p">[</span><span class="nx">BAG2Nummeraanduiding</span><span class="p">]</span>
</code></pre></div>
<p>Deze Query (ingang) beschrijft dus dat er een nummeraanduiding opgehaald kan worden voor een gegeven <strong>identificatiecode</strong> (vergelijkbaar met een standaard REST API) of dat er een set aan objecten opgehaald kan worden (met paginatie parameters <strong>first</strong> en <strong>offset</strong>). Middels de zogenoemde <em>directive</em> lpad wordt input van een gebruiker voor identificatiecode automatisch aangevuld tot 16 karakters.</p>
<h3 id="resolvers">Resolvers</h3>
<p>Wanneer de typedefs gedefiniëerd zijn moet het GraphQL endpoint nog weten hoe het de onderliggende data moet ophalen. Dit is terug te vinden in de resolvers. Een voorbeeldje:</p>
<div class="highlight"><pre><span></span><code><span class="nx">BAG2Nummeraanduiding</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">hoofdadresVan</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">,</span> <span class="nx">info</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">querydb</span><span class="p">({</span> <span class="nx">pool</span><span class="o">:</span> <span class="s1">&#39;bag_pg&#39;</span><span class="p">,</span> <span class="nx">ctx</span><span class="o">:</span> <span class="nx">bagsql</span><span class="p">[</span><span class="s2">&quot;bag2verblijfsobject&quot;</span><span class="p">],</span> <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;hoofdadres = :identificatie&quot;</span><span class="p">,</span> <span class="nx">binds</span><span class="o">:</span> <span class="p">{</span> <span class="nx">peildatum</span><span class="o">:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">peilDatum</span><span class="p">,</span> <span class="nx">identificatie</span><span class="o">:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">identificatiecode</span> <span class="p">}});</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<p>Kortom, de resolvers beschrijven hier dat er een voorgedefiniëerde SQL query (<strong>bag2verlijfsobject</strong>) moet worden afgevuurd met daarin een aantal bind variabelen (parameters) om van een object met type <strong>BAG2Nummeraanduiding</strong> het object op te halen dat het <strong>hoofdadresVan</strong> deze nummeraanduiding is. Middels de pool wordt aangegeven uit welke database de data moet komen.</p>
<h2 id="graphql-over-de-silos-heen">GraphQL over de silo's heen</h2>
<p>Al onze GraphQL endpoints voldoen aan de <a href="https://www.apollographql.com/docs/intro/platform/" title="Link naar de Apollo GraphQL website">Apollo GraphQL standaard</a>. Apollo is een open-source framework bovenop GraphQL waarmee voornamelijk federatie gemakkelijker is gemaakt. Wanneer verschillende GraphQL endpoints naar elkaar verwijzen (bijvoorbeeld doordat de onderliggende data relaties naar een andere databron bevat) gebruiken we Apollo om de brug tussen deze silo's te slaan.</p>
<p><img alt="Apollo GraphQL" src="../images/apollo-graphql-logo.png" /></p>
<p>Dit betekent dat - governance technisch - data eigenaren verantwoordelijk zijn voor de data in hun eigen silo (en desbetreffende endpoint). Maar ook dat er middels een zogenoemde Apollo Gateway een bevraging kan worden uitgevoerd over deze verschillende silo's heen. Hierbij is het irrelevant waar deze endpoints staan. Voor deze endpoints geldt dus een volledige <strong>federated approach</strong>. De kracht hiervan is dat Kadaster niet per se een endpoint hoeft te hosten op alle data, maar dat ook externe partijen (zoals bijvoorbeeld CBS of NDW) een eigen endpoint zouden kunnen hosten, welke we dan wel weer integraal kunnen bevragen. Uiteraard wel zolang zij maar aan dezelfde standaarden voldoen. Om de silo's met elkaar te verbinden moeten er in de silo's zogenoemde <strong>extends</strong> worden aangebracht. Een voorbeeldje:</p>
<div class="highlight"><pre><span></span><code><span class="nx">extend</span> <span class="nx">type</span> <span class="nx">BGTPand</span> <span class="err">@</span><span class="nx">key</span> <span class="p">(</span><span class="nx">fields</span><span class="o">:</span> <span class="s2">&quot;identificatiebagpnd peilDatum&quot;</span><span class="p">){</span>
    <span class="nx">identificatiebagpnd</span><span class="o">:</span> <span class="nb">String</span> <span class="err">@</span><span class="nx">external</span>
    <span class="nx">peilDatum</span><span class="o">:</span> <span class="nb">Date</span> <span class="err">@</span><span class="nx">external</span>
    <span class="s2">&quot;&quot;&quot;In de BGT is voor het Pand object een relatie tot het afgeleide BAG pand opgenomen. Een BGT pand kan niet bestaan zonder onderliggend BAG pand. </span>
<span class="s2">    Dit is een verwijzing naar de bijbehorende voorkomens (historie) van het BAG pand. Alleen het actuele voorkomen wordt meegenomen wanneer peilDatum niet leeg is.&quot;&quot;&quot;</span>
    <span class="nx">bagpand</span><span class="o">:</span> <span class="p">[</span><span class="nx">BAG2Pand</span><span class="p">]</span> 
<span class="p">}</span>
</code></pre></div>
<p>Hier wordt dus gesteld dat een BGTPand een relatie heeft met een BAGPand. En dat klopt. Een BGT Pand <a href="https://docs.geostandaarden.nl/imgeo/catalogus/bgt/#objectafbakening-pand-panddelen">kan zelfs niet bestaan zonder BAG Pand</a>. De identifier naar het BAG pand is dan ook een attribuut van het BGT Pand Object. Door in een extend aan te geven dat deze administratieve relatie bestaat, en een bijbehorende resolver te implementeren, kunnen beide objecten nu in samenhang worden bevraagd.</p>
<h2 id="graphql-over-linked-data">GraphQL over Linked Data</h2>
<p>Voor onze toepassing geldt dat wij vaak GraphQL toepassen om traditionele data naar Linked Data te transformeren. Er zijn echter ook een scala aan toepassingen te bedenken waarom GraphQL ook een hele waardevolle abstractielaag kan bieden bovenop Linked Data. GraphQL is een breder geadopteerd query mechanisme dan SPARQL (de querytaal van Linked Data, red.) en biedt ook meer mogelijkheden om gemakkelijk door het schema heen te lopen.</p>
<p>Het is dan ook mogelijk om een Linked Data endpoint met een (Apollo) GraphQL endpoint te abstraheren. Voor Linked Data endpoints geldt dat hier een <a href="https://github.com/TriplyDB/Comunica-GraphQL/" title="Link naar Communica open-source Apollo GraphQL">communica implementatie</a> met bijbehorende JSON-LD context <a href="https://github.com/kadaster/labs.kadaster.nl/blob/master/assets/json-ld/bag/0.0/bag.jsonld">(Zie bijvoorbeeld de JSON-LD context van BAG 2.0)</a> bij hoort.</p>
<h2 id="conclusie">Conclusie</h2>
<ul>
<li>Een GraphQL endpoint is back-end agnostisch.</li>
<li>Een GraphQL endpoint wordt gedefiniëerd door zijn typedefs en resolvers.</li>
<li>GraphQL endpoints kunnen middels het Apollo framework geheel federatief worden opgezet en beheerd.</li>
<li>Middels een Apollo GraphQL Gateway zijn de federatieve endpoints echter wel op één plek toegankelijk.</li>
<li>GraphQL kan ook middels Communica dienen als abstractielaag voor een gegeven Linked Data bron.</li>
</ul>
<p>Een technische architectuur van dit geheel is te vinden in de volgende plaat:</p>
<p><img alt="Technische Architectuur GraphQL" src="../images/architectuur-technisch-oud.png" /></p>
<p>Terwijl we functioneel de volgende overzichtsplaat hanteren:</p>
<p><img alt="Functionele Architectuur GraphQL" src="../images/architectuur-functioneel-oud.png" /></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../Brondata/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Brondata
            </div>
          </div>
        </a>
      
      
        <a href="../Enhancer/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              GraphQL naar Linked Data
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
    
  </body>
</html>