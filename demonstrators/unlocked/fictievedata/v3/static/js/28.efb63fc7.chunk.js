(this["webpackJsonpviewer-builder-client"]=this["webpackJsonpviewer-builder-client"]||[]).push([[28],{1303:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return ae}));var r=t(3),l=t(5),n=t(6),i=t(31),s=t(7),o=t(8),u=t(0),c=t.n(u),p=t(1217),d=t(1209),b=t(829),h=t(689),v=t(1212),m=t(762),f=t(959),j=t(1207),g=t(1304),O=t(878),x=t.n(O),y=t(100),C=t(21),w=t(35),I=t.n(w),R=t(1311),k=t(1315),E=t(1314),S=t(1310),T=t(1312),F=t(1313),A=t(340),D=t(1122),U=t.n(D),_=t(1120),L=t.n(_),P=t(1121),V=t.n(P),z=t(597),N=(t(843),t(530)),X=t(599),B=t(598),J=t(1309),M=t(588),K=t(1),H=function(e){var a=c.a.createRef(),t=function(e){a.current.remove()};return Object(K.jsxs)(N.a,{ref:a,open:!0,onClose:t,PaperProps:{sx:{width:"50%",height:"70%"}},children:[Object(K.jsx)(M.a,{children:"Create And Add"}),Object(K.jsx)(B.a,{children:Object(K.jsx)(J.a,{children:"hier dus alle relaties in een selectable table "})}),Object(K.jsxs)(X.a,{disableSpacing:!0,sx:{gap:"10px"},children:[Object(K.jsx)(z.a,{variant:"outlined",onClick:function(e){return t()},children:"Cancel"}),Object(K.jsx)(z.a,{variant:"outlined",onClick:t,children:"Submit"})]})]})},q=t(13),Q=t(22),W=t(1300),Y=t(26),G=function(e,a,t,r){var l=c.a.createRef(),n=[],i=function(e,a,t){if(e.target.checked)n.push(a);else for(var r in n){if(n[r].uri===a.uri){n.splice(r,1);break}}},s=function(e){var l=[];if(null!=r.value&&Array.isArray(r.value))for(var i in r.value)l.push(r.value[i]);for(var i in n)l.push(n[i]);t.change(a.id,l),o()},o=function(e){l.current.remove()},u=(Y.a.CancelToken,function(){var e=Object(Q.a)(Object(q.a)().mark((function e(){var t,r,l,n,s,o,u,c;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>   select distinct ?uri ?label ?label2 where {graph ?g {<"+decodeURIComponent(a.propuri)+"> rdfs:range/^rdfs:subClassOf* ?cls } graph<"+decodeURIComponent(a.graph)+">{?uri a ?cls. optional {?uri rdfs:label ?label} optional {?uri skos:prefLabel ?label2}}}",e.next=3,window.top.query(t);case 3:r=e.sent,l=[];try{for(n in r.data.results.bindings)s={},o=r.data.results.bindings[n],s.value=o.uri.value,null!=o.label&&(s.label=o.label.value),null==s.label&&null!=o.label2&&(s.label=o.label2.value),null==s.label&&(s.value.includes("#")?s.label=s.value.split("#")[1]:(u=s.value.split("/"),s.label=u[u.length-1])),l.push(s)}catch(d){console.log(d)}c=Object(K.jsx)(S.a,{component:A.a,children:Object(K.jsxs)(R.a,{size:"small","aria-label":"a dense table",children:[Object(K.jsx)(T.a,{children:Object(K.jsxs)(F.a,{children:[Object(K.jsx)(E.a,{color:"primary",padding:"checkbox",children:Object(K.jsx)(W.a,{disabled:!0,inputProps:{"aria-label":"select all "}})}),Object(K.jsx)(E.a,{color:"primary",children:"name"})]})}),Object(K.jsx)(k.a,{children:l.map((function(e){return Object(K.jsxs)(F.a,{children:[" ",Object(K.jsx)(E.a,{children:Object(K.jsx)(W.a,{onChange:function(a){i(a,e)}})}),Object(K.jsx)(E.a,{children:e.label})]},e.value)}))})]})}),p(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),p=function(a){var t,r=Object(K.jsxs)(N.a,{ref:l,open:!0,onClose:o,PaperProps:{sx:{width:"50%",height:"70%"}},children:[Object(K.jsx)(M.a,{children:"Add relations"}),Object(K.jsxs)(B.a,{children:[Object(K.jsx)(J.a,{}),a]}),Object(K.jsxs)(X.a,{disableSpacing:!0,sx:{gap:"10px"},children:[Object(K.jsx)(z.a,{variant:"outlined",onClick:function(e){return o(e)},children:"Cancel"}),Object(K.jsx)(z.a,{variant:"outlined",onClick:s,children:"Submit"})]})]});t=document.createElement("div"),e.current.appendChild(t),I.a.render(r,t)};u()},Z=t(42),$=t.n(Z),ee=function(e){var a=Object(u.useRef)(null),t=Object(f.b)(),r=function(e){if(null==e)return null;if(e.includes("#"))return e.split("#")[1];var a=e.split("/");return a[a.length-1]},l=Object(f.a)(e),n=l.input,i=l.meta,s=Object(f.b)(e);i.data.dialog=!1,null!=n.value&&0!=Array.isArray(n.value)||(n.value=[]);var o=[];for(var c in n.value){var p=n.value[c];"object"!=typeof p?o.push({uri:p,label:r(p)}):(null!=p.label&&""!=p.label||(p.label=r(p.uri)),o.push(p))}n.value=o;var d=e.label||"relations";return Object(K.jsxs)(u.Fragment,{children:[Object(K.jsx)("div",{ref:a}),Object(K.jsx)(S.a,{sx:{mt:2},component:A.a,children:Object(K.jsxs)(R.a,{sx:{minWidth:150},size:"small","aria-label":"simple table",children:[Object(K.jsx)(T.a,{children:Object(K.jsxs)(F.a,{children:[Object(K.jsx)(E.a,{children:d}),Object(K.jsxs)(E.a,{align:"right",children:[Object(K.jsx)(z.a,{onClick:function(){new G(a,e,s,n)},size:"small",variant:"outlined",startIcon:Object(K.jsx)(L.a,{}),children:"add existing"}),Object(K.jsx)(z.a,{onClick:function(){var t,r=new H(e,a);t=document.createElement("div"),a.current.appendChild(t),I.a.render(r,t)},size:"small",variant:"outlined",startIcon:Object(K.jsx)(V.a,{}),children:"create and add"})]})]})}),Object(K.jsx)(k.a,{children:n.value.map((function(a){return Object(K.jsxs)(F.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(K.jsx)(E.a,{component:"th",scope:"row",children:Object(K.jsx)("div",{onClick:function(){return function(e){var a=t.schema.props.hyperlinkPar;null!=a&&window.top.publish(a,e)}(a.uri)},className:$.a.link+"  "+$.a.inlineblock,children:a.label})}),Object(K.jsx)(E.a,{align:"right",children:Object(K.jsx)(z.a,{size:"small",sx:{":hover":{color:"blue"}},startIcon:Object(K.jsx)(U.a,{}),onClick:function(){return function(a){try{var t=[];for(var r in n.value)n.value[r].uri===a||t.push(n.value[r]);s.change(e.id,t)}catch(l){console.log(l)}}(a.uri)}})})]},a.uri)}))})]})})]})},ae=function(e){Object(s.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={schema:{fields:[{component:h.a.TEXT_FIELD,name:"voornaam",label:"voornaam",validate:[{type:m.a.REQUIRED}]},{component:h.a.CHECKBOX,name:"adres2",label:"adres of zoiets v22"},{component:h.a.DATE_PICKER,name:"datepicker",label:"datum of zoiets"},{component:h.a.SWITCH,name:"iets3",label:"datum of zoiets"},{component:h.a.SELECT,name:"iets34",label:"datum of zoiets",options:[{label:"Dogs",value:"1"},{label:"Cats",value:"2"},{label:"Hamsters",value:"3"}]},{component:h.a.SLIDER,name:"iets35",label:"datum of zoiets"}]}},r.submitFormCommand=function(e,a){var t=[];if(r.props.masseditmode){var l=r.getAllUris();for(var n in l){var s=l[n],o=r.getResultJSON(e);for(var n in o){var u=o[n];u.uri=s,t.push(u)}}}else t=r.getResultJSON(e);console.log("submitFormCommand",t);var c={results:t};null!=r.props.ruleTagAfterSubmit&&(c.ruleTagAfterSubmit=r.props.ruleTagAfterSubmit),y.a.sendCommand(Object(i.a)(r),"formCommand",c,r.submitFormSuccesful,r.submitFormFailure)},r.submitFormSuccesful=function(){if(C.a.setTimeStampParameter(Object(i.a)(r),!0),r.props.closePopup)try{r.props.closeDialog()}catch(e){}},r.submitFormFailure=function(){null!=r.props.failureMessage&&window.alert(r.props.failureMessage)},r.submitInternalParameters=function(e){r.getResultArrayJSON(e);var a={};for(var t in e){var l=e[t],n=decodeURIComponent(l.propuri),i=decodeURIComponent(l.value);a[n]=i}r.props.publishMultipleValues(a)},r.onSubmit=function(e,a){try{if("internalparameters"===r.props.submit)return void r.submitInternalParameters(e);if("formCommand"===r.props.submit)return void r.submitFormCommand(e,a);if("javascript"===r.props.submit)return void console.log(e)}catch(t){}},r.ref=c.a.createRef(),j.a.relation=ee,window.top.publish=e.publish,window.top.pubsub=e.pubsub,r}return Object(n.a)(t,[{key:"containsMultiUri",value:function(){var e=this.getAllUris(),a=0;for(var t in e)if(++a>1)return!0;return!1}},{key:"getAllUris",value:function(){var e={};for(var a in this.props.data.results.bindings){var t=this.props.data.results.bindings[a].uri.value;e[t]=t}return e}},{key:"getSchema",value:function(){try{var e={fields:[]};if(null==this.props.data)return null;var a={},t={};this.id_def=t,e.props=a,e.propsID=t;var r=[];for(var l in this.props.data.results.bindings){var n=this.props.data.results.bindings[l],i=encodeURIComponent(n.uri.value),s=encodeURIComponent(n.propUri.value),o=a[i+"_"+s];this.props.masseditmode&&(o=a[s]);var u=n.label.value;if(null==this.aantal&&(this.aantal=0),this.aantal++,null==o){var c=this.aantal+"id"+r.length;(o={id:c,validate:[]}).propuri=s,this.props.masseditmode?a[s]=o:a[i+"_"+s]=o,r.push(o),o.isDisabled=!1;try{o.graph=encodeURIComponent(n.graph.value)}catch(g){}try{o.uri=encodeURIComponent(n.uri.value)}catch(g){}try{o.type=encodeURIComponent(n.type.value)}catch(g){}if(null!=n.required)try{Boolean(JSON.parse(n.required.value.toLowerCase()))&&o.validate.push({type:m.a.REQUIRED})}catch(g){}null!=n.disabled&&(o.isDisabled=Boolean(JSON.parse(n.disabled.value.toLowerCase()))),null!=n.hidden&&(o.hideField=Boolean(JSON.parse(n.hidden.value.toLowerCase()))),t[c]=o,o.propuri=s,o.name=c,o.label=u;try{o.clearedValue=null,o.initialValue=null,o.defaultValue=null,o.initialValue=n.value.value}catch(O){}var p=h.a.TEXT_FIELD;if(null!=n.type){var d="";try{"int"!==(d=(d=n.type.value).replace("http://www.w3.org/2001/XMLSchema#",""))&&"integer"!==d||(p=h.a.TEXT_FIELD,o.datatype="integer"),"float"!==d&&"decimal"!==d||(p=h.a.TEXT_FIELD,o.datatype="number"),"boolean"===d&&(p=h.a.CHECKBOX),"date"===d&&(o.variant="date",p=h.a.DATE_PICKER,o.inputFormat="L",o.outputFormat="L"),"dateTime"===d&&(p=h.a.DATE_PICKER),"uri"!==d&&"relation"!==d||(p="relation",null!=n.value&&(o.initialValue=[n.value.value])),"stringlist"===d&&(p=h.a.FIELD_ARRAY,o.fields=[{component:h.a.TEXT_FIELD,label:"label"}])}catch(O){console.log(O)}}o.component=p}else if(null!=n.type){d="";try{"uri"!==(d=n.type.value)&&"relation"!==d||o.initialValue.includes(n.value.value)||o.initialValue.push(n.value.value)}catch(g){console.log(g)}}try{var b=n.optionLabel.value;if(o.noOptionsMessage="no options found",null==o.options&&(o.options=[],o.component="select",o.simpleValue=!0),null==n.optionValue){var v=!1;for(var f in o.options){o.options[f].value==b&&(v=!0)}v||(o.options.push({label:b,value:b}),o.dataType="string",o.datatype2="string")}else{o.dataType="string";try{"literal"!=n.optionValue.type&&(o.dataType="string",o.datatype2="uri")}catch(g){}var j=encodeURIComponent(n.optionValue.value);v=!1;for(var f in o.options){o.options[f].value==j&&(v=!0)}v||o.options.push({label:b,value:j})}}catch(x){}o.options,this.props.masseditmode&&(o.value=null)}return e.volgorde=r,e.fields=r,e.props=this.props,e}catch(g){}return null}},{key:"getResultJSON",value:function(e){var a=[];for(var t in e){var r=this.id_def[t];if(null!=r){var l={};l.propuri=r.propuri,l.valuetype=r.type,l.graph=r.graph,l.uri=r.uri,a.push(l);var n=e[t];if(n instanceof Date&&(n=n.toISOString()),Array.isArray(n)){var i=n;try{Array.isArray(n[0])&&(i=n[0])}catch(d){}var s=!0;for(var o in i)if(null!=i[o]||"null"!=i[o]){var u=i[o].uri||i[o].value||n[o],c=encodeURIComponent(u);if(s)l.value=c,s=!1,delete l.valuetype;else{var p={};p.propuri=r.propuri,p.value=c,p.graph=r.graph,p.uri=r.uri,a.push(p)}}}else null!=n&&(l.value=encodeURIComponent(n));"select"==l.valuetype&&(delete l.valuetype,l.value=n)}}return a}},{key:"getCreateClass",value:function(){var e=null;try{for(var a in this.props.data.results.bindings){return e=this.props.data.results.bindings[a].createClass.value}}catch(t){}return e}},{key:"createClick",value:function(){var e=this.getCreateClass();console.log("create not yet implemented",e)}},{key:"render",value:function(){if(null==this.props.data)return null;var e=this.getSchema(),a=!1;if(null!=this.getCreateClass()&&(a=!0),0==a&&null==e&&null!=this.props.emptyText&&""!=this.props.emptyText)return Object(K.jsx)("div",{style2:"padding: 35px;",children:Object(K.jsx)("p",{children:this.props.emptyText})});var t=this.props.cancelbutton;null==t&&(t=!1);var l=this.props.submitbutton;null==l&&(l=!1);this.props.disabled;if(this.props.disabled&&!1,null==e)return 1==a?Object(K.jsx)(z.a,{color:"grey",onClick:this.createClick,children:"create "}):null;var n=v.a;return this.props.readonly&&(n=function(e){var a=e.formFields;e.schema;return Object(K.jsx)(g.a,{sx:{m:2},children:Object(K.jsx)(g.a,{container:!0,rowSpacing:1,children:a})})}),Object(K.jsx)(p.a,{dateAdapter:d.a,children:Object(K.jsxs)("div",{className:x.a.bbdform,children:[this.props.title&&Object(K.jsx)("div",{className:x.a.title,children:this.props.title}),Object(K.jsx)(b.a,Object(r.a)(Object(r.a)({ref:this.ref,schema:e,componentMapper:j.a,FormTemplate:n},{onSubmit:this.onSubmit}),t&&{onCancel:this.onCancel}))]})})}}]),t}(u.Component)},878:function(e,a,t){e.exports={grid:"BBDForm_grid__2VcLy",bbdform:"BBDForm_bbdform__2RjzR"}}}]);
//# sourceMappingURL=28.efb63fc7.chunk.js.map