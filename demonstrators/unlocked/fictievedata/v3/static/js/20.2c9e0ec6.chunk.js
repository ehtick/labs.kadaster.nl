(this["webpackJsonpviewer-builder-client"]=this["webpackJsonpviewer-builder-client"]||[]).push([[20],{1147:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1147},1148:function(e,t,n){e.exports={max:"BBIFCJSViewer_max__LTkNf"}},1293:function(e,t,n){"use strict";n.r(t);var i=n(20),o=n(5),c=n(6),a=n(31),r=n(7),l=n(8),s=n(0),u=n(607),f=n(1211),h=n(1148),v=n.n(h),d=n(661),p=n(1),T=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).viewer=null,e.ifc_model={},e.mousemove=function(e){},e.mouseclick=function(t){var n=Object(a.a)(e);null!=e.viewer&&e.viewer.IFC.selector.pickIfcItem(!0).then((function(e){console.log(e),null!=e&&(e.indirect=!1,n.viewer.IFC.getProperties(e).then((function(e){console.log(e)})))}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){if(!this.onlyOnce){var e=document.getElementById("viewer-container");if(null!=e){this.onlyOnce=!0;var t=new f.a({container:e,backgroundColor:new u.o(16777215)});this.viewer=t,t.axes.setAxes();var n=this;t.IFC.setWasmPath("../../bb/wasm/").then((function(){n.ready()}))}}}},{key:"ready",value:function(){this.loadIFCFilesTest()}},{key:"loadSparqlGLTFResults",value:function(){if(null!=this.props.data){var e=this.props.data.results.bindings;if(e!=this.latestBindings)for(var t in this.latestBindings=e,console.log(this.viewer),e)try{var n=e[t].gltf.value;n=JSON.parse(n)}catch(i){}}}},{key:"loadIFCFilesTest",value:function(){console.log("IFC ready");var e=[];for(var t in e.push("SITE_HOW.ifc"),e.push("SITE_HOW_CTRAY.ifc"),e.push("SITE_HOW_EQUIPMENT.ifc"),e.push("SITE_HOW_EQUIPMENT2.ifc"),e.push("SITE_HOW_EXTRAS_HOA.ifc"),e.push("SITE_HOW_HVAC.ifc"),e.push("SITE_HOW_PENETRATIONS.ifc"),e.push("SITE_HOW_PIPING.ifc"),e.push("SITE_HOW_STRUCTURE.ifc"),e.push("SITE_HOW_STRUCTURE1.ifc"),e.push("SITE_HOW_STRUCTURE2.ifc"),e.push("SITE_HOW_STRUCTURE3.ifc"),e.push("SITE_HOW_STRUCTURE4.ifc"),e){var n=e[t];null==this.ifc_model[n]&&this.loadIFC("http://localhost:3000/temp/"+n,!0)}}},{key:"loadIFC",value:function(e,t){try{console.log("loading IFC file :"+e),this.viewer.loadIfcUrl(e,t)}catch(n){}}},{key:"convertToGLTF",value:function(e){this.viewer.GLTF.exportIfcFileAsGltf({ifcFileUrl:e,splitByFloors:!0,categories:{walls:[d.z,d.A],slabs:[d.v],windows:[d.B],curtainwalls:[d.j,d.l,d.f],doors:[d.g]},getProperties:!0}).then((function(e){var t=document.createElement("a");for(var n in document.body.appendChild(t),e.gltf){var o=e.gltf[n];for(var c in o){var a=o[c].file;a&&(t.download="".concat(a.name,"_").concat(n,"_").concat(c,".gltf"),t.href=URL.createObjectURL(a),t.click())}}var r,l=Object(i.a)(e.json);try{for(l.s();!(r=l.n()).done;){var s=r.value;t.download="".concat(s.name,".json"),t.href=URL.createObjectURL(s),t.click()}}catch(u){l.e(u)}finally{l.f()}t.remove()}))}},{key:"render",value:function(){return this.init(),this.loadSparqlGLTFResults(),Object(p.jsx)("div",{onClick:this.mouseclick,onMouseMove:this.mousemove,className:v.a.max,id:"viewer-container",height:"100%"})}}]),n}(s.Component);t.default=T}}]);
//# sourceMappingURL=20.2c9e0ec6.chunk.js.map