(this["webpackJsonpviewer-builder-client"]=this["webpackJsonpviewer-builder-client"]||[]).push([[21],{1068:function(e,t,i){e.exports={main:"Tree_main__2U69K",treeItem:"Tree_treeItem__3GbeU",checkbox:"Tree_checkbox__2OB1o",treeLabel:"Tree_treeLabel__DGe-D",w2ui:"Tree_w2ui__ATF8z",selected:"Tree_selected__1wXwi",treeArrow:"Tree_treeArrow__1dDJV",right:"Tree_right__3hO93",down:"Tree_down__3os-n",noselect:"Tree_noselect__pu0tM",refresh:"Tree_refresh__3pfqJ",threeColorTemplate:"Tree_threeColorTemplate__2HVQ2",label:"Tree_label__3BOrf"}},1282:function(e,t,i){"use strict";i.r(t);var r=i(11),s=i(31),l=i(3),n=i(5),a=i(6),o=i(7),c=i(8),p=i(0),u=i.n(p),h=i(1068),d=i.n(h),b=i(33),v=i(21),f=i(69),m=i(40),k=i(1),I=function(e){Object(o.a)(i,e);var t=Object(c.a)(i);function i(){var e;Object(n.a)(this,i);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={childrenVisible:e.props.depth>0},e.treeItemClicked=function(t){try{if("arrow"==t.target.slot)return}catch(i){}e.props.treeItemClicked(e.props.item)},e.treeItemCheckboxClicked=function(t){var i=t.target.checked;e.props.item.checked=i,e.props.treeItemCheckboxClicked(e.props.item)},e.arrowClicked=function(){e.setState({childrenVisible:!e.state.childrenVisible})},e}return Object(a.a)(i,[{key:"determineVisibility",value:function(e){e.children&&(e.containsSelection?this.setState({childrenVisible:!0}):this.props.shouldNonSelectedSubTreeClose&&this.setState({childrenVisible:!1}))}},{key:"componentDidMount",value:function(){this.props.selectedItem&&this.determineVisibility(this.props.item)}},{key:"componentDidUpdate",value:function(e){this.props.selectedItem&&e.selectedItem!==this.props.selectedItem&&this.determineVisibility(this.props.item)}},{key:"renderArrow",value:function(e){return e.children?this.state.childrenVisible?Object(k.jsx)("span",{slot:"arrow",onClick:this.arrowClicked,className:d.a.treeArrow+" "+d.a.down}):Object(k.jsx)("span",{slot:"arrow",onClick:this.arrowClicked,className:d.a.treeArrow+" "+d.a.right}):Object(k.jsx)("span",{slot:"arrow",className:d.a.treeArrow})}},{key:"handlePublishingUri2OrNot",value:function(e,t){if(this.props.selectedItem===e[t]){var i=this.props.publishVariable2;if(i)this.props.pubsub[i],e.URI2}}},{key:"render",value:function(){var e=this,t=this.props.item,r=this.props.data.head.vars[0],s=this.props.data.head.vars[1];null==t.icon&&""!==this.props.defaultIcon&&(t.icon=this.props.defaultIcon),this.handlePublishingUri2OrNot(t,s),this.props.selectedItem,t[s];var n=!1;n="true"==(n=t.checkbox);var a=this.props.checkedHash[t.uri];null==a&&(a=!1);var o=this.props.textstyle;return o=d.a[o],Object(k.jsx)(f.a,{children:Object(k.jsxs)("div",{className:d.a.treeItem,id:this.props.selectedItem===t[s]?t[s]:null,children:[Object(k.jsxs)("div",{className:d.a.treeLabel+" "+o,onClick:this.treeItemClicked,children:[this.renderArrow(t),null!=t.icon&&Object(k.jsx)(m.a,{icon:t.icon,size:"xs",transform:"down-6; left-4",onClick:this.treeItemClicked}),null!=t.icon2&&Object(k.jsx)(m.a,{icon:t.icon2,size:"xs",transform:"down-6; left-4",onClick:this.treeItemClicked}),null!=t.icon3&&Object(k.jsx)(m.a,{icon:t.icon3,size:"xs",transform:"down-6; left-4",onClick:this.treeItemClicked}),Object(k.jsxs)("span",{onClick:this.treeItemClicked,className:this.props.selectedItem===t[s]?d.a.selected+" "+d.a.noselect+" "+d.a.label+"  ":"anders "+d.a.noselect+" "+d.a.label+" ",children:[n&&Object(k.jsx)("input",{onClick:this.treeItemCheckboxClicked,className:d.a.checkbox+" "+d.a.noselect+" "+d.a.label,type:"checkbox",defaultChecked:a}),t[r]]})]}),t.children&&this.state.childrenVisible&&t.children.map((function(t,r){return Object(k.jsx)(i,Object(l.a)(Object(l.a)({},e.props),{},{item:t,depth:e.props.depth-1}),r)}))]})})}}]),i}(u.a.Component),w=function(e){Object(o.a)(i,e);var t=Object(c.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e)).state={items:[],checked:{}},r.treeItemCheckboxClicked=function(e){var t=e.checked,i=r.state.checked;if(i[e[r.props.data.head.vars[1]]]=t,r.setState({checked:i}),null!=r.props.multipleCheckBoxParameter){var l=v.a.getMultiplePropValueAsSingleValue(r.props.multipleselectparametertype,i),n=Object(s.a)(r);setTimeout((function(){n.props.publish(n.props.multipleCheckBoxParameter,l)}),100)}},r.treeItemClicked=function(e){r.selectEvent=!0;var t=r.props.data.head.vars[1],i=r.props.publishVariable,s=r.props.publishVariable2,l=e[t];if(s){var n=e.URI2;null!=n&&r.props.publish(s,n)}null!=i&&(r.props.publish(i,l),r.setState({selectedItem:l,latestTreeSelection:l}))},null==r.id&&(null==i.nid&&(i.nid=0),i.nid++,r.id="tree"+i.nid),r}return Object(a.a)(i,[{key:"componentDidUpdate",value:function(){null!=this.props.subscribeVariable&&(this.selectEvent?this.selectEvent=!1:this.scrollLatestUriIntoView())}},{key:"findInChild",value:function(e,t){try{for(var i=0;i<e.children.length;i++){var r=e.children[i];if(console.log(r.id),r.id==t)return r}for(var s=0;s<e.children.length;s++){r=e.children[s];return this.findInChild(r,t)}}catch(l){console.log(l)}return null}},{key:"scrollLatestUriIntoView",value:function(){var e=this.props.pubsub[this.props.subscribeVariable];if(!0===this.props.scrollSelectionIntoView){if(null!=e&&this.state.latestTreeSelection==e)return;if(null!=e){var t=this;setTimeout((function(){var i=document.getElementById(t.id);if(null!=i){var r=document.getElementById(e);i.contains(r)||(r=null),null!=r&&r.scrollIntoView()}}),0)}else{var i=document.getElementById(this.id);if(null==i)return;var r=document.getElementById("begin");i.contains(r)||(r=null),null!=r&&r.scrollIntoView()}}}},{key:"processURLSelection",value:function(){if(null!=this.props&&this.props.parseInitialURLForSelection){var e=window.top.location.href;if(e.startsWith(this.props.setSelectionInURLStartsString))this.props.pubsub[this.props.subscribeVariable]=e;else try{var t=window.top.location.search,i=new URLSearchParams(t).get("selection");if(null!=i){if(i.startsWith(this.props.setSelectionInURLStartsString)||i.startsWith("http://localhost:3000/"))return this.props.pubsub[this.props.subscribeVariable]=i,!0;console.log("initial parametervalue not according to ",this.props.setSelectionInURLStartsString)}else console.log("no initial selection parameter value found",e)}catch(r){console.log(r)}}return!1}},{key:"componentDidMount",value:function(){if(this.processURLSelection())this.scrollLatestUriIntoView();else{if(null!=this.props.initialSelection&&(null!=this.props.subscribeVariable||null!=this.props.publishVariable)){var e=this.props.subscribeVariable;null==e&&(e=this.props.publishVariable),this.props.pubsub[e]=this.props.initialSelection}this.scrollLatestUriIntoView()}}},{key:"shouldComponentUpdate222",value:function(e,t){if(null==this.props.subscribeVariable)return!0;var i=this.props.pubsub[this.props.subscribeVariable],r=e.pubsub[e.subscribeVariable];if(i!=r&&null!=this.props.publishVariable2){var s=this.props.pubsub[this.props.publishVariable2],l=e.pubsub[e.publishVariable2];if(s==l){console.log("we should check variable 2?");var n=this.lookupPublishVariable2(r);l!=n&&console.log("confirmed to update publisch varaible 2 ",n)}}return!0}},{key:"lookupPublishVariable2",value:function(e){try{var t=this.props.subscribeVariable;if(null==this.props.data)return null;for(var i in this.props.data.results.bindings){var r=this.props.data.results.bindings[i];if(r[t].value==e)return r.URI2.value}}catch(s){console.log(s)}return null}},{key:"containsSelection",value:function(e,t,i){if(i[t]==e)return!0;var r=!1;for(var s in i.children){var l=i.children[s];l.containsSelection=this.containsSelection(e,t,l),1==l.containsSelection&&(r=!0)}return r}},{key:"openSelectie",value:function(e){var t=this.props.pubsub[this.props.subscribeVariable];if(null!=t){var i=this.props.data.head.vars[1];for(var r in e){var s=e[r];s.containsSelection=this.containsSelection(t,i,s)}}}},{key:"findParents",value:function(e){var t=this.props.data.head.vars,i=t[1],r=t[2],s=[],l={};for(var n in e){var a=e[n],o=l[a[i]];null==o&&(o=[],l[a[i]]=o),o.push(a)}for(var c in e){var p=e[c];null==l[p[r]]&&s.push(p);var u=p[r];if(null!=u&&null!=(o=l[u]))for(var h in o){var d=o[h],b=d.children;null==b&&(b=[],d.children=b),b.push(p)}}return s}},{key:"aggregate",value:function(e){try{var t=this.props.data.head.vars,i=t[1],r=t[2],s={};for(var l in e.results.bindings){var n=e.results.bindings[l],a="onbekend";null!=n[r]&&(a=n[r].value);var o=a+"_"+n[i].value,c=s[o];if(null!=c)for(var p in n)c[p]=n[p];else s[o]=n}var u=[];for(var h in s)u.push(s[h]);return e.results.bindings=u,e}catch(d){console.log(d)}return null}},{key:"exists",value:function(e,t){try{if(t.child===e)return!0;if(null==t.children)return!1;for(var i in t.children){if(this.exists(e,t.children[i]))return!0}}catch(r){console.log(r)}return!1}},{key:"render",value:function(){var e=this;if(!this.props.data)return null;var t=this.state.rootitem;null==t&&(t=this.createTreeItems());var i=this.state.checked;if(null==t)return null;var r=this.props.pubsub[this.props.subscribeVariable];if(null==r&&(r=this.state.selectedItem),r&&this.props.setSelectionInURL){var s=!0,n=window.top.location.origin+"/",a=n+r.replace(n,"");a!==r&&("http://www.buildingbits.nl/reset"==a?a=window.top.location.origin+window.top.location.pathname:this.props.debugSetSelectionInURL?a=window.top.location.origin+window.top.location.pathname+"?selection="+r:s=!1),s&&setTimeout((function(){try{window.top.history.pushState({},null,a)}catch(e){console.log(e)}}),0)}var o=0;return null!=this.props.expandLevel&&(o=this.props.expandLevel),Array.isArray(t)?Object(k.jsxs)("div",{id:this.id,className:d.a.main+" "+d.a[this.props.panelstyle],disabled:this.state.loading,children:[this.props.title&&Object(k.jsx)("div",{className:d.a.title,children:this.props.title}),t.map((function(t,s){return Object(k.jsx)(I,Object(l.a)(Object(l.a)({},e.props),{},{item:t,treeItemClicked:function(t){return e.treeItemClicked(t)},treeItemCheckboxClicked:function(t){return e.treeItemCheckboxClicked(t)},selectedItem:r,checkedHash:i,depth:o,root:!0}),s)}))]}):Object(k.jsxs)("div",{id:this.id,className:d.a.main+" "+d.a[this.props.panelstyle],disabled:this.state.loading,children:[this.props.title&&Object(k.jsx)("div",{className:d.a.title,children:this.props.title}),Object(k.jsx)(I,Object(l.a)(Object(l.a)({},this.props),{},{item:t,treeItemClicked:function(t){return e.treeItemClicked(t)},treeItemCheckboxClicked:function(t){return e.treeItemCheckboxClicked(t)},selectedItem:r,checkedHash:i,depth:o,root:!0}))]})}},{key:"createTreeItems",value:function(){var e,t=this.props.pubsub[this.props.subscribeVariable],i=this.props.data;if(this.props.aggregate&&(i=this.aggregate(i)),null==i)return null;if(null==(i=Object(b.d)(i)))return null;var s=this.props.data.head.vars;i=this.findParents(i),this.openSelectie(i);var l=s[0];e={},Object(r.a)(e,l,this.props.rootLabel),Object(r.a)(e,"children",i),Object(r.a)(e,"containsSelection",!!t);return""!=this.props.rootLabel&&null!=this.props.rootLabel||1!=i.length?i:i[0]}}]),i}(u.a.Component);t.default=w}}]);
//# sourceMappingURL=21.149c748b.chunk.js.map