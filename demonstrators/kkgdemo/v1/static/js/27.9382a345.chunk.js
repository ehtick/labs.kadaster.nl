(this["webpackJsonpviewer-builder-client"]=this["webpackJsonpviewer-builder-client"]||[]).push([[27],{1241:function(e,t,i){e.exports={myTooltip:"Tree_myTooltip__1_Vvr",main:"Tree_main__2U69K",treeItem:"Tree_treeItem__3GbeU",checkbox:"Tree_checkbox__2OB1o",treeLabel:"Tree_treeLabel__DGe-D",w2ui:"Tree_w2ui__ATF8z",treeLink:"Tree_treeLink__2o-EK",selected:"Tree_selected__1wXwi",treeArrow:"Tree_treeArrow__1dDJV",right:"Tree_right__3hO93",down:"Tree_down__3os-n",noselect:"Tree_noselect__pu0tM",refresh:"Tree_refresh__3pfqJ",threeColorTemplate:"Tree_threeColorTemplate__2HVQ2",label:"Tree_label__3BOrf",deleteIcon:"Tree_deleteIcon__1gTNJ",spin:"Tree_spin__2y3Ay"}},1498:function(e,t,i){"use strict";i.r(t);var r=i(10),s=i(9),l=i(2),n=i(17),o=i(4),a=i(5),c=i(28),p=i(11),u=i(12),h=i(0),d=i.n(h),b=i(1241),v=i.n(b),f=i(45),m=i(24),k=(i(122),i(51)),j=i(167),I=i(61),w=i(250),g=i(1),y=function(e){Object(p.a)(i,e);var t=Object(u.a)(i);function i(e){var r;return Object(o.a)(this,i),(r=t.call(this,e)).treeItemClicked=function(e){try{if("arrow"==e.target.slot)return}catch(t){}r.props.treeItemClicked(r.props.item)},r.treeItemCheckboxClicked=function(e){var t=e.target.checked;r.props.item.checked=t,r.props.treeItemCheckboxClicked(r.props.item)},r.arrowClicked=function(){r.setState({childrenVisible:!r.state.childrenVisible})},r.deleteClick=function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var i,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=r.props.deletebuttonrule)){e.next=4;break}return window.alert("This function is not available, as no rule has been configured for the delete button"),e.abrupt("return");case 4:if(window.confirm("Are you sure you want to delete this?")){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,r.props.setLoading(!0),e.next=10,Object(w.a)(i,JSON.stringify(Object(l.a)(Object(l.a)({},t),null!==(n=r.props.deletebuttonruleParams)&&void 0!==n?n:{})));case 10:m.a.setTimeStampParameter(Object(c.a)(r),!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),window.alert("An error occurred during deletion"),console.error(e.t0);case 17:return e.prev=17,r.props.setLoading(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),r.state={childrenVisible:e.depth>0||!!e.item.children&&e.item.containsSelection},r}return Object(a.a)(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.selectedItem!==e.selectedItem,i=this.props.item!==e.item,r=!!e.item.children&&e.item.containsSelection,s=this.state.childrenVisible;r&&i?s=!0:t&&e.shouldNonSelectedSubTreeClose&&(s=!1),s!==this.state.childrenVisible&&this.setState({childrenVisible:s})}},{key:"renderArrow",value:function(e){return e.children?this.state.childrenVisible?Object(g.jsx)("span",{slot:"arrow",onClick:this.arrowClicked,className:v.a.treeArrow+" "+v.a.down}):Object(g.jsx)("span",{slot:"arrow",onClick:this.arrowClicked,className:v.a.treeArrow+" "+v.a.right}):Object(g.jsx)("span",{slot:"arrow",className:v.a.treeArrow})}},{key:"handlePublishingUri2OrNot",value:function(e,t){if(this.props.selectedItem===e[t]){var i=this.props.publishVariable2;if(i)this.props.pubsub[i],e.URI2}}},{key:"render",value:function(){var e,t,r,s=this,n=this.props.item,o=this.props.data.head.vars[0],a=this.props.data.head.vars[1];null==n.icon&&""!==this.props.defaultIcon&&(n.icon=this.props.defaultIcon),this.handlePublishingUri2OrNot(n,a),this.props.selectedItem,n[a];var c=!1;c="true"==(c=n.checkbox);var p=this.props.checkedHash[n.uri];null==p&&(p=!1);var u=this.props.textstyle;u=v.a[u];var h=d.a.Fragment,b=Boolean(n.children&&n.children.length>0),f=null==n.deletable||"true"===n.deletable,m=Boolean(this.props.deletebuttonrule&&(!b||this.props.allowNonLeafDeletion)&&f);return Object(g.jsx)(h,{children:Object(g.jsxs)("div",{role:"treeitem","aria-label":n[o],className:v.a.treeItem,ref:this.props.selectedItem===n[a]?this.props.selectedElementRef:null,children:[Object(g.jsxs)("div",{className:v.a.treeLabel+" "+u,onClick:this.treeItemClicked,children:[Object(g.jsxs)("div",{className:Object(I.b)(v.a.treeLink,"flex flex-grow"),children:[this.renderArrow(n),null!=n.icon&&Object(g.jsx)(k.a,{icon:n.icon,size:"xs",style:{color:null!==(e=n.iconColor)&&void 0!==e?e:void 0},transform:"down-6; left-4;",onClick:this.treeItemClicked}),null!=n.icon2&&Object(g.jsx)(k.a,{icon:n.icon2,size:"xs",style:{color:null!==(t=n.icon2Color)&&void 0!==t?t:void 0},transform:"down-6; left-4",onClick:this.treeItemClicked}),null!=n.icon3&&Object(g.jsx)(k.a,{icon:n.icon3,size:"xs",style:{color:null!==(r=n.icon3Color)&&void 0!==r?r:void 0},transform:"down-6; left-4",onClick:this.treeItemClicked}),Object(g.jsxs)("span",{onClick:this.treeItemClicked,className:this.props.selectedItem===n[a]?v.a.selected+" "+v.a.noselect+" "+v.a.label+"  ":"anders "+v.a.noselect+" "+v.a.label+" ",children:[c&&Object(g.jsx)("input",{onClick:this.treeItemCheckboxClicked,className:v.a.checkbox+" "+v.a.noselect+" "+v.a.label,type:"checkbox",defaultChecked:p}),n[o]]}),null!=n.description&&Object(g.jsx)(j.a,{title:n.description,children:Object(g.jsx)("div",{children:Object(g.jsx)(k.a,{style:{color:"#BBB",paddingLeft:"5px"},icon:"fa-circle-info",size:"s",transform:"down+1; left+4"})})})]}),m&&Object(g.jsx)("button",{"aria-label":'Delete "'.concat(n[o],'"'),children:Object(g.jsx)(k.a,{className:Object(I.b)(v.a.deleteIcon,"pr-3"),icon:"times",color:"grey",onClick:function(){return s.deleteClick(n)}})})]}),n.children&&this.state.childrenVisible&&n.children.map((function(e,t){return Object(g.jsx)(i,Object(l.a)(Object(l.a)({},s.props),{},{item:e,depth:s.props.depth-1}),(null===e||void 0===e?void 0:e.child)||t)}))]})})}}]),i}(d.a.Component),C=function(e){Object(p.a)(i,e);var t=Object(u.a)(i);function i(e){var r;Object(o.a)(this,i),(r=t.call(this,e)).state={items:[],checked:{}},r.selectedElementRef=d.a.createRef(),r.treeItemCheckboxClicked=function(e){var t=e.checked,i=r.state.checked;if(i[e[r.props.data.head.vars[1]]]=t,r.setState({checked:i}),null!=r.props.multipleCheckBoxParameter){var s=m.a.getMultiplePropValueAsSingleValue(r.props.multipleselectparametertype,i),l=Object(c.a)(r);setTimeout((function(){l.props.publish(l.props.multipleCheckBoxParameter,s)}),100)}},r.treeItemClicked=function(e){r.selectEvent=!0;var t=r.props.data.head.vars[1],i=r.props.publishVariable,s=r.props.publishVariable2,l=r.props.publishVariable3,n=r.props.publishVariable4,o=e[t];if(n){var a=e.URI4;null!=a&&r.props.publish(n,a)}if(l){var c=e.URI3;null!=c&&r.props.publish(l,c)}if(s){var p=e.URI2;null!=p&&r.props.publish(s,p)}null!=i&&r.setState({selectedItem:o,latestTreeSelection:o},(function(){r.props.publish(i,o)}))},null==r.id&&(null==i.nid&&(i.nid=0),i.nid++,r.id="tree"+i.nid);var s=e.pubsub[e.subscribeVariable];return s&&(r.state.selectedItem=s),r}return Object(a.a)(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.pubsub[this.props.subscribeVariable],i=e.pubsub[e.subscribeVariable];t!==i&&this.state.selectedItem!==i&&this.setState({selectedItem:i})}},{key:"componentDidUpdate",value:function(e,t){if(null!=this.props.subscribeVariable)if(this.selectEvent)this.selectEvent=!1;else{var i=t.selectedItem!==this.state.selectedItem,r=e.data!==this.props.data;!!this.selectedElementRef.current&&(i||r)&&this.scrollLatestUriIntoView()}}},{key:"findInChild",value:function(e,t){try{for(var i=0;i<e.children.length;i++){if((s=e.children[i]).id==t)return s}for(var r=0;r<e.children.length;r++){var s=e.children[r];return this.findInChild(s,t)}}catch(l){console.log(l)}return null}},{key:"scrollLatestUriIntoView",value:function(){var e,t,i=this.state.selectedItem,r=this.state.latestTreeSelection;this.props.scrollSelectionIntoView&&(r&&r===i||null===(e=this.selectedElementRef.current)||void 0===e||null===(t=e.scrollIntoView)||void 0===t||t.call(e))}},{key:"myPublish",value:function(e,t){var i=this;try{var r={};r[e]=t,this.props.dispatch({type:"PUBLISH",data:r})}catch(s){console.log("my publish delayed"),setTimeout((function(){i.myPublish(e,t)}),100)}}},{key:"processURLSelection",value:function(){if(null!=this.props&&this.props.parseInitialURLForSelection){var e=window.top.location.href;if(e.startsWith(this.props.setSelectionInURLStartsString)){var t=this,i=this.props.pubsub[this.props.subscribeVariable];return!(!i||!i.includes(e))||(e.includes("?")?(console.log("this is not a value uri so not publshing it"),!0):(setTimeout((function(){t.myPublish(t.props.subscribeVariable,e)}),250),!0))}try{var r=window.top.location.search,s=new URLSearchParams(r).get("selection");if(null!=s){if(s.startsWith(this.props.setSelectionInURLStartsString)||s.startsWith("http://localhost:3000/"))return this.props.pubsub[this.props.subscribeVariable]=s,!0;console.log("initial parametervalue not according to ",this.props.setSelectionInURLStartsString)}else console.log("no initial selection parameter value found",e)}catch(l){console.log(l)}}return!1}},{key:"componentDidMount",value:function(){var e=this;if(this.processURLSelection())this.scrollLatestUriIntoView();else{if(null!=this.props.initialSelection&&(null!=this.props.subscribeVariable||null!=this.props.publishVariable)){var t=this.props.subscribeVariable;null==t&&(t=this.props.publishVariable),this.setState({selectedItem:this.props.initialSelection},(function(){e.props.publish(t,e.props.initialSelection)}))}this.scrollLatestUriIntoView()}}},{key:"shouldComponentUpdate222",value:function(e,t){if(null==this.props.subscribeVariable)return!0;var i=this.props.pubsub[this.props.subscribeVariable],r=e.pubsub[e.subscribeVariable];if(i!=r&&null!=this.props.publishVariable2){var s=this.props.pubsub[this.props.publishVariable2],l=e.pubsub[e.publishVariable2];if(s==l)this.lookupPublishVariable2(r)}return!0}},{key:"lookupPublishVariable2",value:function(e){try{var t=this.props.subscribeVariable;if(null==this.props.data)return null;for(var i in this.props.data.results.bindings){var r=this.props.data.results.bindings[i];if(r[t].value==e)return r.URI2.value}}catch(s){console.log(s)}return null}},{key:"containsSelection",value:function(e,t,i){return this.cs=0,this.containsSelectionR(e,t,i)}},{key:"containsSelectionR",value:function(e,t,i){if(i[t]==e)return!0;var r=!1;for(var s in i.children){if(this.cs++,this.cs>1e4)return console.log("too many items in the tree so not selecting items anymore"),!1;var l=i.children[s];l.containsSelection=this.containsSelectionR(e,t,l),1==l.containsSelection&&(r=!0)}return r}},{key:"markItemsContainingSelection",value:function(e,t){if(null!=t){var i=this.props.data.head.vars[1];for(var r in e){var s=e[r];s.containsSelection=this.containsSelection(t,i,s)}}}},{key:"findParents",value:function(e){var t=this.props.data.head.vars,i=t[1],r=t[2],s=[],l={};for(var n in e){var o=e[n],a=l[o[i]];null==a&&(a=[],l[o[i]]=a),a.push(o)}for(var c in e){var p=e[c];null==l[p[r]]&&s.push(p);var u=p[r];if(null!=u&&null!=(a=l[u]))for(var h in a){var d=a[h],b=d.children;null==b&&(b=[],d.children=b),b.push(p)}}return s}},{key:"aggregate",value:function(e){try{var t=this.props.data.head.vars,i=t[1],r=t[2],s={};for(var l in e.results.bindings){var n=e.results.bindings[l],o="onbekend";null!=n[r]&&(o=n[r].value);var a=o+"_"+n[i].value,c=s[a];if(null!=c)for(var p in n)c[p]=n[p];else s[a]=n}var u=[];for(var h in s)u.push(s[h]);return e.results.bindings=u,e}catch(d){console.log(d)}return null}},{key:"exists",value:function(e,t){try{if(t.child===e)return!0;if(null==t.children)return!1;for(var i in t.children){if(this.exists(e,t.children[i]))return!0}}catch(r){console.log(r)}return!1}},{key:"render",value:function(){var e=this;if(!this.props.data)return null;var t=this.state.selectedItem,i=this.state.rootitem;null==i&&(i=this.createTreeItems(t));var r=this.state.checked;if(null==i)return null;if(t&&this.props.setSelectionInURL){var s=!0,n=window.top.location.origin+"/",o=n+t.replace(n,"");o!==t&&("http://www.buildingbits.nl/reset"==o?o=window.top.location.origin+window.top.location.pathname:this.props.debugSetSelectionInURL?o=window.top.location.origin+window.top.location.pathname+"?selection="+t:s=!1),s&&setTimeout((function(){try{window.top.history.pushState({},null,o)}catch(e){console.log(e)}}),0)}var a=0;return null!=this.props.expandLevel&&(a=this.props.expandLevel),Array.isArray(i)?Object(g.jsxs)("div",{id:this.id,className:v.a.main+" "+v.a[this.props.panelstyle],disabled:this.state.loading,children:[this.props.title&&Object(g.jsx)("div",{className:v.a.title,children:this.props.title}),i.map((function(s,n){var o;return Object(g.jsx)(y,Object(l.a)(Object(l.a)({},e.props),{},{selectedElementRef:e.selectedElementRef,item:s,treeItemClicked:function(t){return e.treeItemClicked(t)},treeItemCheckboxClicked:function(t){return e.treeItemCheckboxClicked(t)},selectedItem:t,checkedHash:r,depth:a,root:!0}),(null===(o=i)||void 0===o?void 0:o.child)||n)}))]}):Object(g.jsxs)("div",{id:this.id,className:v.a.main+" "+v.a[this.props.panelstyle],disabled:this.state.loading,children:[this.props.title&&Object(g.jsx)("div",{className:v.a.title,children:this.props.title}),Object(g.jsx)(y,Object(l.a)(Object(l.a)({},this.props),{},{selectedElementRef:this.selectedElementRef,item:i,treeItemClicked:function(t){return e.treeItemClicked(t)},treeItemCheckboxClicked:function(t){return e.treeItemCheckboxClicked(t)},selectedItem:t,checkedHash:r,depth:a,root:!0}))]})}},{key:"createTreeItems",value:function(e){var t,i=this.props.data;if(this.props.aggregate&&(i=this.aggregate(i)),null==i)return null;if(null==(i=Object(f.d)(i)))return null;var s=this.props.data.head.vars;i=this.findParents(i),this.markItemsContainingSelection(i,e);var l=s[0];t={},Object(r.a)(t,l,this.props.rootLabel),Object(r.a)(t,"children",i),Object(r.a)(t,"containsSelection",!!e);return""!=this.props.rootLabel&&null!=this.props.rootLabel||1!=i.length?i:i[0]}}]),i}(d.a.Component);t.default=C}}]);
//# sourceMappingURL=27.9382a345.chunk.js.map