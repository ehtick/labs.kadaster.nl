(this["webpackJsonpviewer-builder-client"]=this["webpackJsonpviewer-builder-client"]||[]).push([[33],{1047:function(e,t,a){e.exports={grid:"BBDForm_grid__2VcLy",bbdform:"BBDForm_bbdform__2RjzR"}},1528:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Fe}));var r=a(2),n=a(4),l=a(5),i=a(28),o=a(11),s=a(12),u=a(0),c=a.n(u),p=a(1429),d=a(1424),b=a(997),v=a(857),h=a(1425),m=a(931),f=a(1421),j=a(1132),O=a(1047),g=a.n(O),x=a(91),y=a(24),C=a(32),w=a.n(C),S=a(1542),R=a(1546),I=a(1545),k=a(1541),T=a(1543),E=a(1544),F=a(481),A=a(1295),D=a.n(A),L=a(1293),N=a.n(L),P=a(1294),U=a.n(P),V=a(344),_=a(999),M=(a(1006),a(694)),B=a(769),X=a(768),z=a(1434),J=a(756),H=a(1),K=function(e){var t=c.a.createRef(),a=function(e){t.current.remove()};return Object(H.jsxs)(M.a,{ref:t,open:!0,onClose:a,PaperProps:{sx:{width:"50%",height:"70%"}},children:[Object(H.jsx)(J.a,{children:"Create And Add"}),Object(H.jsx)(X.a,{children:Object(H.jsx)(z.a,{children:"hier dus alle relaties in een selectable table "})}),Object(H.jsxs)(B.a,{disableSpacing:!0,sx:{gap:"10px"},children:[Object(H.jsx)(V.a,{variant:"outlined",onClick:function(e){return a()},children:"Cancel"}),Object(H.jsx)(V.a,{variant:"outlined",onClick:a,children:"Submit"})]})]})},W=a(9),q=a(17),Q=a(1533),Y=a(42),G=function(e,t,a,r){var n=c.a.createRef(),l=[],i=function(e,t,a){if(e.target.checked)l.push(t);else for(var r in l){if(l[r].uri===t.uri){l.splice(r,1);break}}},o=function(e){var n=[];if(null!=r.value&&Array.isArray(r.value))for(var i in r.value)n.push(r.value[i]);for(var i in l)n.push(l[i]);a.change(t.id,n),s()},s=function(e){n.current.remove()},u=(Y.a.CancelToken,function(){var e=Object(q.a)(Object(W.a)().mark((function e(){var a,r,n,l,o,s,u,c;return Object(W.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>   select distinct ?uri ?label ?label2 where {graph ?g {<"+decodeURIComponent(t.propuri)+"> rdfs:range/^rdfs:subClassOf* ?cls } graph<"+decodeURIComponent(t.graph)+">{?uri a ?cls. optional {?uri rdfs:label ?label} optional {?uri skos:prefLabel ?label2}}}",e.next=3,window.top.query(a);case 3:r=e.sent,n=[];try{for(l in r.data.results.bindings)o={},s=r.data.results.bindings[l],o.value=s.uri.value,null!=s.label&&(o.label=s.label.value),null==o.label&&null!=s.label2&&(o.label=s.label2.value),null==o.label&&(o.value.includes("#")?o.label=o.value.split("#")[1]:(u=o.value.split("/"),o.label=u[u.length-1])),n.push(o)}catch(d){console.log(d)}c=Object(H.jsx)(k.a,{component:F.a,children:Object(H.jsxs)(S.a,{size:"small","aria-label":"a dense table",children:[Object(H.jsx)(T.a,{children:Object(H.jsxs)(E.a,{children:[Object(H.jsx)(I.a,{color:"primary",padding:"checkbox",children:Object(H.jsx)(Q.a,{disabled:!0,inputProps:{"aria-label":"select all "}})}),Object(H.jsx)(I.a,{color:"primary",children:"name"})]})}),Object(H.jsx)(R.a,{children:n.map((function(e){return Object(H.jsxs)(E.a,{children:[" ",Object(H.jsx)(I.a,{children:Object(H.jsx)(Q.a,{onChange:function(t){i(t,e)}})}),Object(H.jsx)(I.a,{children:e.label})]},e.value)}))})]})}),p(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),p=function(t){var a,r=Object(H.jsxs)(M.a,{ref:n,open:!0,onClose:s,PaperProps:{sx:{width:"50%",height:"70%"}},children:[Object(H.jsx)(J.a,{children:"Add relations"}),Object(H.jsxs)(X.a,{children:[Object(H.jsx)(z.a,{}),t]}),Object(H.jsxs)(B.a,{disableSpacing:!0,sx:{gap:"10px"},children:[Object(H.jsx)(V.a,{variant:"outlined",onClick:function(e){return s(e)},children:"Cancel"}),Object(H.jsx)(V.a,{variant:"outlined",onClick:o,children:"Submit"})]})]});a=document.createElement("div"),e.current.appendChild(a),w.a.render(r,a)};u()},Z=a(74),$=a.n(Z),ee=function(e){var t=Object(u.useRef)(null),a=Object(_.b)(),r=function(e){if(null==e)return null;if(e.includes("#"))return e.split("#")[1];var t=e.split("/");return t[t.length-1]},n=Object(_.a)(e),l=n.input,i=n.meta,o=Object(_.b)(e);i.data.dialog=!1,null!=l.value&&0!=Array.isArray(l.value)||(l.value=[]);var s=[];for(var c in l.value){var p=l.value[c];"object"!=typeof p?s.push({uri:p,label:r(p)}):(null!=p.label&&""!=p.label||(p.label=r(p.uri)),s.push(p))}l.value=s;var d=e.label||"relations";return Object(H.jsxs)(u.Fragment,{children:[Object(H.jsx)("div",{ref:t}),Object(H.jsx)(k.a,{sx:{mt:2},component:F.a,children:Object(H.jsxs)(S.a,{sx:{minWidth:150},size:"small","aria-label":"simple table",children:[Object(H.jsx)(T.a,{children:Object(H.jsxs)(E.a,{children:[Object(H.jsx)(I.a,{children:d}),Object(H.jsxs)(I.a,{align:"right",children:[Object(H.jsx)(V.a,{onClick:function(){new G(t,e,o,l)},size:"small",variant:"outlined",startIcon:Object(H.jsx)(N.a,{}),children:"add existing"}),Object(H.jsx)(V.a,{onClick:function(){var a,r=new K(e,t);a=document.createElement("div"),t.current.appendChild(a),w.a.render(r,a)},size:"small",variant:"outlined",startIcon:Object(H.jsx)(U.a,{}),children:"create and add"})]})]})}),Object(H.jsx)(R.a,{children:l.value.map((function(t){return Object(H.jsxs)(E.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(H.jsx)(I.a,{component:"th",scope:"row",children:Object(H.jsx)("div",{onClick:function(){return function(e){var t=a.schema.props.hyperlinkPar;null!=t&&window.top.publish(t,e)}(t.uri)},className:$.a.link+"  "+$.a.inlineblock,children:t.label})}),Object(H.jsx)(I.a,{align:"right",children:Object(H.jsx)(V.a,{size:"small",sx:{":hover":{color:"blue"}},startIcon:Object(H.jsx)(D.a,{}),onClick:function(){return function(t){try{var a=[];for(var r in l.value)l.value[r].uri===t||a.push(l.value[r]);o.change(e.id,a)}catch(n){console.log(n)}}(t.uri)}})})]},t.uri)}))})]})})]})},te=a(961),ae=function(){function e(t){Object(n.a)(this,e),this.bbdform=t}return Object(l.a)(e,[{key:"processResource",value:function(e){return console.log("is it a cls or uri ",e),te.a}}]),e}(),re=a(1538),ne=a(1535),le=a(167),ie=a(1550),oe=a(1530),se=a(1049),ue=a.n(se),ce=a(78),pe=a(222),de=a(121),be=a(56),ve=a(427),he=Object(ie.a)(),me=new Set(["http://www.w3.org/2001/XMLSchema#string"]);function fe(e){var t=Object(_.a)(e).input,a=function(e){var t=Object(_.b)(),a=Object(_.a)(e),r=a.input,n=Object(u.useRef)([]),l=function(a){"function"===typeof a?t.change(e.id,a(n.current)):t.change(e.id,a)};Array.isArray(r.value)&&(n.current=r.value);return{values:n.current,valuesRef:n,setValues:l}}(e),n=a.values,l=a.setValues,i=e.type&&decodeURIComponent(e.type),o=!!i&&me.has(i),s=Object(u.useMemo)((function(){return n.map((function(t){var a=e.options.find((function(e){return e.value===t}));return null!==a&&void 0!==a?a:{value:t,label:t}}))}),[n,e.options]),c=Object(u.useMemo)((function(){var t=new Set(n);return e.options.filter((function(e){return!t.has(e.value)}))}),[n,e.options]);return Object(H.jsx)(ue.a,{children:Object(H.jsxs)(re.a,{fullWidth:!0,children:[Object(H.jsx)(oe.a,{options:c,multiple:!0,value:s,freeSolo:o,onChange:function(e,t){var a=t.map((function(e){return"string"===typeof e?e:e.value}));l(a)},renderTags:function(){return""},renderInput:function(a){return Object(H.jsx)(ne.a,Object(r.a)(Object(r.a)({margin:"normal",label:e.label,placeholder:o?"Search existing options or type new values to add":"Search",name:t.name},a),{},{InputLabelProps:{shrink:!0}}))},filterOptions:o?function(e,t){var a=he(e,t),r=t.inputValue,n=e.some((function(e){return r===e.value}));return""===r||n||a.push({value:r,label:'Add "'.concat(r,'" or press enter')}),a}:he}),n.length>0&&Object(H.jsx)(be.a,{onDragEnd:function(e){return function(e){e.over&&e.active.id!==e.over.id&&l((function(t){var a=t.findIndex((function(t){return t===e.active.id})),r=t.findIndex((function(t){return t===e.over.id}));return Object(pe.b)(t,a,r)}))}(e)},children:Object(H.jsx)("div",{className:"bg-stone-100 border border-slate-600 rounded flex flex-col overflow-y-auto",style:{maxHeight:"200px",scrollbarWidth:"thin",fontFamily:"Roboto, sans-serif"},role:"list",children:Object(H.jsx)(pe.a,{items:n,children:s.map((function(t){return Object(H.jsxs)("div",{role:"listitem","aria-label":t.label,className:"w-full flex gap-1 py-1 pl-2 pr-1 text-xs align-items-center",children:[e.sortable?Object(H.jsxs)(ve.a,{id:t.value,className:"flex flex-grow gap-1 [&>svg]:hover:opacity-50",children:[Object(H.jsx)(ce.DragHandleDots2Icon,{className:"opacity-25"}),Object(H.jsx)("div",{className:"flex-grow",children:t.label})]}):Object(H.jsx)("div",{className:"flex-grow",children:t.label}),Object(H.jsx)("div",{className:"[&>button]:hover:opacity-100",children:Object(H.jsx)(le.a,{title:"Delete",children:Object(H.jsx)(de.a,{type:"button",variant:"ghost",className:"opacity-50 w-5 h-5 p-0",onClick:function(){return e=t.value,void l((function(t){return t.filter((function(t){return t!==e}))}));var e},children:Object(H.jsx)(ce.Cross2Icon,{})})})})]},t.value)}))})})})]})})}var je=a(8),Oe=a(1303),ge=a(1296);function xe(e){var t=Object(_.b)(),a=Object(_.a)(e).input,r=Object(u.useState)(!1),n=Object(je.a)(r,2),l=n[0],i=n[1],o=function(a){t.change(e.id,a)};return Object(H.jsx)(ue.a,{className:"position-relative",children:Object(H.jsx)(ge.Popover,{isOpen:l,positions:["top","bottom"],align:"start",onClickOutside:function(){return i(!1)},containerClassName:"z-10 shadow-lg",content:function(){return Object(H.jsx)(Oe.a,{color:a.value,onChange:o})},children:Object(H.jsx)(re.a,{fullWidth:!0,children:Object(H.jsx)(ne.a,{onFocus:function(){return i(!0)},label:e.label,value:a.value,onChange:function(e){return o(e.currentTarget.value)},InputProps:{startAdornment:Object(H.jsx)("div",{className:"mr-2",onClick:function(){return i(!0)},children:Object(H.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:a.value}})})}})})})})}var ye=a(23),Ce=a(369),we="http://www.w3.org/1999/02/22-rdf-syntax-ns#List";function Se(e){return Object(Ce.a)(decodeURIComponent(e))?e:"colorhex"===e?"http://www.w3.org/1999/02/22-rdf-syntax-ns#string":void 0}var Re=a(126),Ie=16,ke=6,Te=Math.pow(Ie,ke);function Ee(){var e=Math.floor(Math.random()*(Te-1)).toString(Ie);return"#"+"0".repeat(ke-e.length)+e}var Fe=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={schema:{fields:[{component:v.a.TEXT_FIELD,name:"voornaam",label:"voornaam",validate:[{type:m.a.REQUIRED}]},{component:v.a.CHECKBOX,name:"adres2",label:"adres of zoiets v22"},{component:v.a.DATE_PICKER,name:"datepicker",label:"datum of zoiets"},{component:v.a.SWITCH,name:"iets3",label:"datum of zoiets"},{component:v.a.SELECT,name:"iets34",label:"datum of zoiets",options:[{label:"Dogs",value:"1"},{label:"Cats",value:"2"},{label:"Hamsters",value:"3"}]},{component:v.a.SLIDER,name:"iets35",label:"datum of zoiets"}]}},r.submitFormCommand=function(e,t){var a=[];if(r.props.masseditmode){var n=r.getAllUris();for(var l in n){var o=n[l],s=r.getResultJSON(e);for(var l in s){var u=s[l];u.uri=o,a.push(u)}}}else a=r.getResultJSON(e);var c={results:a};if(null!=r.props.ruleTagAfterSubmit){c.ruleTagAfterSubmit=r.props.ruleTagAfterSubmit;var p=r.props.parameters;if(null!=p)try{p=y.a.processStringForParameters(Object(i.a)(r),p);var d=JSON.parse(p);c.ruleTagAfterSubmitParameters=d}catch(b){console.log("cannot set parameters for rule execution ",r.props.parameters)}}x.a.sendCommand(Object(i.a)(r),"formCommand",c,r.submitFormSuccesful,r.submitFormFailure)},r.submitFormSuccesful=function(){if(y.a.setTimeStampParameter(Object(i.a)(r),!0),r.props.successMessage&&Object(Re.b)(r.props.successMessage),r.props.closePopup)try{r.props.closeDialog()}catch(e){}},r.submitFormFailure=function(){null!=r.props.failureMessage&&window.alert(r.props.failureMessage)},r.submitInternalParameters=function(e){try{e=r.getResultJSON(e);var t={};for(var a in e){var n=e[a],l=decodeURIComponent(n.propuri),i=decodeURIComponent(n.value);t[l]=i}r.props.publishMultipleValues(t)}catch(o){console.log(o)}},r.onSubmit=function(e,t){try{if("internalparameters"===r.props.submit)return void r.submitInternalParameters(e);if("formCommand"===r.props.submit)return void r.submitFormCommand(e,t);if("javascript"===r.props.submit)return void console.log(e)}catch(a){}},r.ref=c.a.createRef(),f.a.relation=ee,f.a.multiselect=fe,f.a.colorpicker=xe,window.top.publish=e.publish,window.top.pubsub=e.pubsub,r.BBDFormBuilderFromLDResource=new ae(Object(i.a)(r)),r}return Object(l.a)(a,[{key:"getAllUris",value:function(){var e={};for(var t in this.props.data.results.bindings){var a=this.props.data.results.bindings[t].uri.value;e[a]=a}return e}},{key:"getSchema",value:function(){try{var e={fields:[]};if(null==this.props.data)return null;var t={},a={};this.id_def=a,e.props=t,e.propsID=a;var r=[];for(var n in this.props.data.results.bindings){var l,i,o,s=this.props.data.results.bindings[n],u=encodeURIComponent(s.uri.value),c=encodeURIComponent(s.propUri.value),p=t[u+"_"+c];this.props.masseditmode&&(p=t[c]);var d=s.label.value;null==this.aantal&&(this.aantal=0),this.aantal++;var b="true"===(null===(l=s.isMulti)||void 0===l?void 0:l.value)||"uri"===(null===(i=s.type)||void 0===i?void 0:i.value)||"relation"===(null===(o=s.type)||void 0===o?void 0:o.value);if(null==p){var h=this.aantal+"id"+r.length;(p={id:h,validate:[]}).propuri=c,this.props.masseditmode?t[c]=p:t[u+"_"+c]=p,r.push(p),p.isDisabled=!1;try{p.graph=encodeURIComponent(s.graph.value)}catch(k){}try{p.uri=encodeURIComponent(s.uri.value)}catch(k){}try{p.type=encodeURIComponent(s.type.value)}catch(k){}if(null!=s.required)try{Boolean(JSON.parse(s.required.value.toLowerCase()))&&p.validate.push({type:m.a.REQUIRED})}catch(k){}null!=s.disabled&&(p.isDisabled=Boolean(JSON.parse(s.disabled.value.toLowerCase()))),null!=s.hidden&&(p.hideField=Boolean(JSON.parse(s.hidden.value.toLowerCase()))),null!=s.addmodus&&(p.addmodus=Boolean(JSON.parse(s.addmodus.value.toLowerCase()))),a[h]=p,p.propuri=c,p.name=h,p.label=d;try{p.clearedValue=null,p.initialValue=null,p.defaultValue=null,p.initialValue=b?[s.value.value]:s.value.value}catch(T){}var f=v.a.TEXT_FIELD;if(null!=s.type){var j="";try{if("int"!==(j=(j=s.type.value).replace("http://www.w3.org/2001/XMLSchema#",""))&&"integer"!==j||(f=v.a.TEXT_FIELD,p.datatype="integer"),"float"!==j&&"decimal"!==j||(f=v.a.TEXT_FIELD,p.datatype="number"),"boolean"===j){f=v.a.CHECKBOX;try{p.initialValue=Boolean(JSON.parse(s.value.value.toLowerCase()))}catch(k){}}var O;if("colorhex"===j)f="colorpicker","random"===(null===(O=s.value)||void 0===O?void 0:O.value)&&(p.initialValue=Ee());"date"===j&&(p.variant="date",f=v.a.DATE_PICKER,p.inputFormat="L",p.outputFormat="L"),"dateTime"===j&&(f=v.a.DATE_PICKER),"uri"!==j&&"relation"!==j||(f="relation",null!=s.value&&(p.initialValue=[s.value.value])),"stringlist"===j&&(f=v.a.FIELD_ARRAY,p.fields=[{component:v.a.TEXT_FIELD,label:"label"}]),"textarea"==j&&(p.datatype="string",p.type="http://www.w3.org/2001/XMLSchema#string",f=v.a.TEXTAREA)}catch(T){console.log(T)}}p.component=f}else if(null!=s.type){j="";try{j=s.type.value;var g=s.value.value;b?p.initialValue.includes(g)||p.initialValue.push(g):p.initialValue=g}catch(k){console.log(k)}}try{var x,y,C,w=s.optionLabel.value;if(p.noOptionsMessage="no options found",null==p.options&&(p.options=[],p.component="select",p.isClearable=!0,p.simpleValue=!0),"true"===(null===(x=s.isMulti)||void 0===x?void 0:x.value))p.component="multiselect",p.isMulti=!0,p.sortable="true"===(null===(y=s.sortable)||void 0===y?void 0:y.value),decodeURI(null===(C=s.collectionType)||void 0===C?void 0:C.value)===we&&(p.sortable=!0,p.collectionType=we);if(null==s.optionValue){var S=!1;for(var R in p.options){p.options[R].value==w&&(S=!0)}S||(p.options.push({label:w,value:w}),p.dataType="string",p.datatype2="string")}else{p.dataType="string";try{"literal"!=s.optionValue.type&&(p.dataType="string",p.datatype2="uri")}catch(k){}var I=s.optionValue.value;S=!1;for(var R in p.options){p.options[R].value==I&&(S=!0)}S||p.options.push({label:w,value:I})}}catch(E){}p.options,this.props.masseditmode&&(p.value=null)}return e.volgorde=r,e.fields=r,e.props=this.props,e}catch(k){}return null}},{key:"getResultJSON",value:function(e){return function(e,t){var a=[];for(var r in t){var n=e[r];if(n){var l=t[r],i=Array.isArray(l)?0===l.length?[null]:l:[l];if(n.collectionType!==we){var o,s=Object(ye.a)(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c={propuri:n.propuri,graph:n.graph,uri:n.uri,addmodus:n.addmodus,value:null};c.valuetype=Se(n.type),"string"!==typeof u||"select"!==n.type&&"uri"!==n.type?u instanceof Date?c.value=u.toISOString():c.value=null==u?null:encodeURIComponent(u):(c.value=u,delete c.valuetype),a.push(c)}}catch(b){s.e(b)}finally{s.f()}}else{var p=Array.isArray(l)?l:[],d={propuri:n.propuri,graph:n.graph,uri:n.uri,addmodus:n.addmodus,value:p,collectionType:n.collectionType};d.valuetype=Se(n.type),a.push(d)}}}return a}(this.id_def,e)}},{key:"getCreateClass",value:function(){var e=null;try{for(var t in this.props.data.results.bindings){return e=this.props.data.results.bindings[t].createClass.value}}catch(a){}return e}},{key:"createClick",value:function(){var e=this.getCreateClass();console.log("create not yet implemented",e)}},{key:"render",value:function(){if(null==this.props.data&&null==this.props.classOrUri)return null;var e=null;if(null!=this.props.data)e=this.getSchema();else{var t=y.a.processStringForParameters(this,this.props.classOrUri);e=this.BBDFormBuilderFromLDResource.processResource(t)}var a=!1;if(null!=this.getCreateClass()&&(a=!0),0==a&&null==e&&null!=this.props.emptyText&&""!=this.props.emptyText)return Object(H.jsx)("div",{style2:"padding: 35px;",children:Object(H.jsx)("p",{children:this.props.emptyText})});var n=this.props.cancelbutton;if(null==n&&(n=!1),null==e)return 1==a?Object(H.jsx)(V.a,{color:"grey",onClick:this.createClick,children:"create "}):null;var l=this.props.submitbuttonlabel;null!=l&&""!=l||(l="submit");var i=function(e,t){return Object(H.jsx)(h.a,Object(r.a)(Object(r.a)({},e),{},{submitLabel:l,children:e.children}))};return this.props.readonly&&(i=function(e){var t=e.formFields;e.schema;return Object(H.jsx)(j.a,{container:!0,rowSpacing:3,children:t})}),Object(H.jsx)(p.a,{dateAdapter:d.a,children:Object(H.jsxs)("div",{className:g.a.bbdform,children:[this.props.title&&Object(H.jsx)("div",{className:g.a.title,children:this.props.title}),Object(H.jsx)(b.a,Object(r.a)({schema:e,componentMapper:f.a,FormTemplate:i,onSubmit:this.onSubmit},n&&{onCancel:this.onCancel}))]})})}}]),a}(u.Component)}}]);
//# sourceMappingURL=33.7bbedd94.chunk.js.map