(this["webpackJsonpviewer-builder-client"]=this["webpackJsonpviewer-builder-client"]||[]).push([[47],{1560:function(t,a,e){"use strict";e.r(a);var r=e(275),n=e(7),c=e(4),o=e(5),s=e(29),i=e(11),l=e(12),d=(e(70),e(35)),f=e(1447),u=e(1448),h=function(t){Object(i.a)(e,t);var a=Object(l.a)(e);function e(){var t;return Object(c.a)(this,e),(t=a.call(this)).getUrl=function(){return"/".concat(window.bbFolderName,"/static/iframes/svgeditor/index.html")},t.convertToDxf=function(a){try{t.blocks=null;var e=Object(u.a)(a),r=new f.b;t.addTextsToDXF(r,e),t.addCirclesToDXF(r,e),t.addPathToDXF(r,e);var n=r.stringify(),c=new Blob([n],{type:"application/dxf"}),o=URL.createObjectURL(c),s=document.createElement("a");s.href=o,s.download="BIM-LEGAL-Splitsingstekening.dxf",s.click(),URL.revokeObjectURL(o),t.showToast("Dxf file is available in the downloads")}catch(i){return console.log(i),void t.showToast("ERROR: could not generate dxf")}return null},t.addCirclesToDXF=function(a,e){var r=e.find("circle"),n=Object(s.a)(t);r.forEach((function(t){n.addCircleToDXF(a,t)}))},t.addPolygonToDXF=function(a,e){e.find("polygon"),Object(s.a)(t)},t.addTextsToDXF=function(a,e){var r=e.find("text"),n=Object(s.a)(t);r.forEach((function(t){n.addTextToDXF(a,t)}))},t.addPathToDXF=function(a,e){var r=e.find("path"),n=Object(s.a)(t);r.forEach((function(t){n.addPath(a,t)}))},t.parseTranslation=function(t){var a=/translate\(([^)]+)\)/.exec(t);if(a){var e=a[1].split(/[\s,]+/).map(Number),r=Object(n.a)(e,2);return{tx:r[0]||0,ty:r[1]||0}}return{tx:0,ty:0}},t.parseTransform=function(t,a,e){if(t.includes("translate")){var r=this.parseTranslation(t);return{x:a+r.tx,y:-(e+r.ty)}}if(t.includes("matrix")){var n=t.match(/rotate\((-?\d+\.?\d*),\s*(-?\d+\.?\d*),\s*(-?\d+\.?\d*)\)/),c={angle:parseFloat(n[1]),cx:parseFloat(n[2]),cy:parseFloat(n[3])},o=t.match(/matrix\((-?\d+\.?\d*),\s*(-?\d+\.?\d*),\s*(-?\d+\.?\d*),\s*(-?\d+\.?\d*),\s*(-?\d+\.?\d*),\s*(-?\d+\.?\d*)\)/),s={a:parseFloat(o[1]),b:parseFloat(o[2]),c:parseFloat(o[3]),d:parseFloat(o[4]),e:parseFloat(o[5]),f:parseFloat(o[6])};return this.transformPoint(a,e,c.angle,c.cx,c.cy,s)}return{x:a,y:-e}},t.transformPoint=function(t,a,e,r,n,c){var o=Math.PI/180*e,s=r+(t-r)*Math.cos(o)-(a-n)*Math.sin(o),i=n+(t-r)*Math.sin(o)+(a-n)*Math.cos(o);return i=-i,{x:s*c.a+i*c.c+c.e,y:s*c.b+i*c.d+c.f}},t.addTextToDXF=function(t,a){var e=this.getBlock(t,a),r=a.parent().attr("transform")||"",n=this.parseTransform(r,a.attr("x"),a.attr("y")),c=n.x,o=n.y,s=a.text(),i=a.attr("font-size")||7;a.attr("font-family");"0m"!==s&&"20m"!==s&&"gemeenschappelijke ruimtes"!==s&&e.addText(Object(f.c)(c,o),i,""+s)},t.addCircleToDXF=function(t,a){var e=a.parent(),r=this.getBlock(t,a),n=e.attr("transform")||"",c=this.parseTransform(n,a.attr("cx"),a.attr("cy")),o=c.x,s=c.y,i=a.attr("r");i<5||r.addCircle(Object(f.c)(o,s),i)},t.addPath=function(t,a){var e=this,n=a.array(),c=a.parent().attr("transform")||"",o=a.attr("stroke-width")||.5,s=this.getBlock(t,a),i=[],l=[];l.push(i),n.forEach((function(t){var a=Object(r.a)(t),n=a[0],o=a.slice(1);"M"===n&&(i=[],l.push(i));for(var s=0;s<o.length;s+=2){var d=e.parseTransform(c,o[s],o[s+1]),f=d.x,u=d.y;i.push({x:f,y:u})}}));for(var d=0;d<l.length;d++)if((i=l[d]).length>1)for(var u=1;u<i.length;u++){var h=s.addLine(Object(f.c)(i[u-1].x,i[u-1].y),Object(f.c)(i[u].x,i[u].y));h.thickness=o,h.lineType="CONTINUOUS",h.thickness>.4?(h.lineScale=4*o,h.colorNumber=f.a.Black):(h.lineScale=2*o,h.colorNumber=f.a.Grey,h.lineTypeScale=2*o)}},t.scrolling="no",t.noEvents=!1,t.usesParameters=!1,t}return Object(o.a)(e,[{key:"insertBlocks",value:function(t){}},{key:"getBlock",value:function(t,a){if(null==this.blocks){this.blocks={};var e=t.addBlock("default");this.blocks.dblock=e,t.addInsert("default",Object(f.c)(0,0,0))}try{var r=a.parent().parent(),n=r.node.getAttribute("id");if(null!=(n=n.replace("_",""))){var c=this.blocks[n];if(null==c){c=t.addBlock(n),this.blocks[n]=c;var o=r.node.getAttribute("transform"),s=0,i=0;try{var l=this.parseTransform(o,0,0),d=l.x,u=l.y;s=d,i=u}catch(h){}return s<0&&(s=0),i<0&&(i=0),t.addInsert(n,Object(f.c)(s,i)),c.addText(Object(f.c)(0,0),1,""),c}}}catch(h){}return this.blocks.dblock}}]),e}(d.a);a.default=h}}]);
//# sourceMappingURL=47.5eec56e0.chunk.js.map